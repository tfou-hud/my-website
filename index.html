<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹ è¿‘å¹³ åœ¨çº¿ç­”é¢˜ç³»ç»Ÿï¼ˆå«å®æ—¶ç­”é¢˜å¡ï¼‰</title>

    <style>

        :root {
    /* ä¸»è‰²è°ƒç³»åˆ— - é›è“ */
    --primary: #4f46e5;           /* ä¸»è‰² */
    --primary-dark: #3730a3;      /* æ·±è‰²ç‰ˆæœ¬ */
    --primary-light: #e0e7ff;     /* æµ…è‰²ç‰ˆæœ¬ */
    --primary-pale: #f0f4ff;      /* ææ·¡ç‰ˆæœ¬ */
    --primary-medium: #818cf8;    /* ä¸­é—´è‰² */
    
    /* æ–‡å­—é¢œè‰²å±‚çº§ */
    --text-main: #1f2937;         /* ä¸»æ–‡å­— - æ·±è‰² */
    --text-sub: #6b7280;          /* æ¬¡çº§æ–‡å­— - ä¸­ç° */
    --text-light: #9ca3af;        /* è½»æ–‡å­— - æµ…ç° */
    --text-accent: #4f46e5;       /* å¼ºè°ƒæ–‡å­— - ä¸»è‰² */
    
    /* èƒŒæ™¯è‰²å±‚çº§ */
    --bg-body: #f9fafb;           /* é¡µé¢èƒŒæ™¯ - ææµ…ç° */
    --bg-card: #ffffff;           /* å¡ç‰‡èƒŒæ™¯ - çº¯ç™½ */
    --bg-hover: #f3f4f6;          /* æ‚¬åœèƒŒæ™¯ - æµ…ç° */
    --bg-active: #eff6ff;         /* æ´»è·ƒèƒŒæ™¯ - ææ·¡è“ */
    
    /* è¾¹æ¡†è‰²å±‚çº§ */
    --border: #e5e7eb;            /* å¸¸è§„è¾¹æ¡† */
    --border-light: #f3f4f6;      /* è½»è¾¹æ¡† */
    --border-strong: #d1d5db;     /* å¼ºè¾¹æ¡† */
    
    /* æˆåŠŸè‰²ç³»åˆ— */
    --success: #10b981;           /* æˆåŠŸè‰² */
    --success-light: #6ee7b7;     /* æµ…æˆåŠŸè‰² */
    --success-bg: #d1fae5;        /* æˆåŠŸèƒŒæ™¯ */
    --success-pale: #ecfdf5;      /* ææ·¡æˆåŠŸèƒŒæ™¯ */
    
    /* é”™è¯¯è‰²ç³»åˆ— */
    --error: #ef4444;             /* é”™è¯¯è‰² */
    --error-light: #f87171;       /* æµ…é”™è¯¯è‰² */
    --error-bg: #fee2e2;          /* é”™è¯¯èƒŒæ™¯ */
    --error-pale: #fef2f2;        /* ææ·¡é”™è¯¯èƒŒæ™¯ */
    
    /* è­¦å‘Šè‰²ç³»åˆ— */
    --warning: #f59e0b;           /* è­¦å‘Šè‰² */
    --warning-light: #fbbf24;     /* æµ…è­¦å‘Šè‰² */
    --warning-bg: #fef3c7;        /* è­¦å‘ŠèƒŒæ™¯ */
    
    /* ä¸­ç«‹è‰²ç³»åˆ— */
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    
    /* é˜´å½± */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    
    /* åœ†è§’ */
    --radius: 12px;
    --radius-sm: 6px;
    --radius-lg: 16px;
    
    /* å¸ƒå±€ */
    --sidebar-width: 300px;
    --sidebar-collapsed-width: 56px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background-color: var(--bg-body);
    color: var(--text-main);
    line-height: 1.6;
    padding-bottom: 80px;
}

/* ==================== æ•´ä½“å¸ƒå±€ ==================== */
.page-wrapper {
    --effective-sidebar: var(--sidebar-width);
    max-width: 1200px;
    margin: 0 auto; /* æ°´å¹³å±…ä¸­ */
    padding: 0 15px;
    padding-right: calc(var(--effective-sidebar) + 40px); /* ç»™å›ºå®šä¾§æ é¢„ç•™ç©ºé—´ */
    display: flex;
    justify-content: center; /* ä¸»ä½“å±…ä¸­ */
    gap: 20px;
}

/* å½“ä¾§æ æŠ˜å æ—¶ï¼Œå‡å°å³ä¾§é¢„ç•™ç©ºé—´ */
body.sidebar-collapsed .page-wrapper { padding-right: calc(var(--sidebar-collapsed-width) + 40px); }

.main-content {
    flex-grow: 1;
    max-width: 880px;
    width: 100%;
    min-width: 320px;
}

/* é¡¶éƒ¨ Header */
.header-hero {
    background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
    color: white;
    padding: 50px 20px 70px;
    text-align: center;
    border-radius: 0 0 30px 30px;
    box-shadow: 0 10px 30px rgba(79, 70, 229, 0.25);
    margin-bottom: -30px;
    /* å°†å¤´éƒ¨å†…å®¹ä¸ä¸»åŒºåŸŸå¯¹é½ï¼ˆè§†è§‰ä¸Šä»ä¸ºå…¨å®½èƒŒæ™¯ï¼‰ */
    display: flex; justify-content: center;
    position: relative;
    overflow: hidden;
}

.header-hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    border-radius: 50%;
}

.header-hero h1 { 
    font-size: 2rem; 
    margin-bottom: 15px; 
    font-weight: 700;
    position: relative;
    z-index: 2;
    letter-spacing: 0.5px;
}

.header-hero p { 
    opacity: 0.95; 
    font-size: 1rem;
    position: relative;
    z-index: 2;
    letter-spacing: 0.3px;
    line-height: 1.5;
}

/* è®¡åˆ†æ¿ */
.score-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 20px;
    text-align: center;
    box-shadow: var(--shadow-md);
    margin-bottom: 30px;
    position: relative;
    z-index: 10;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid var(--border-light);
    transition: all 0.3s ease;
}

.score-card:hover {
    box-shadow: var(--shadow-lg);
    border-color: var(--primary-light);
}

.score-info { text-align: left; }
.score-info span { display: block; color: var(--text-light); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; }
.score-info strong { font-size: 1.1rem; color: var(--text-main); margin-top: 4px; }

.final-score {
    font-size: 1.5rem;
    font-weight: 800;
    color: var(--primary);
    display: none;
}

/* é¢˜å‹æ ‡é¢˜ */
.section-badge {
    display: inline-block;
    background: var(--primary-dark);
    color: white;
    padding: 8px 16px;
    border-radius: var(--radius-sm);
    font-size: 0.9rem;
    margin: 30px 0 15px;
    font-weight: 600;
    scroll-margin-top: 50px;
    letter-spacing: 0.3px;
}

/* é¢˜ç›®å¡ç‰‡ */
.question-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 24px;
    margin-bottom: 20px;
    box-shadow: var(--shadow-sm);
    border: 2px solid var(--border-light);
    transition: all 0.3s ease;
    scroll-margin-top: 70px;
    position: relative;
}

.question-card:hover {
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    transform: translateY(-2px);
    border-color: var(--primary-light);
}

.question-text {
    font-size: 1.05rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--text-main);
    letter-spacing: 0.2px;
}
.q-tag {
    font-size: 0.75rem; 
    color: var(--primary); 
    background: var(--primary-pale);
    padding: 4px 8px; 
    border-radius: 4px; 
    margin-right: 8px; 
    vertical-align: middle;
    font-weight: 600;
}

/* é€‰é¡¹æ ·å¼ */
.options-group { display: flex; flex-direction: column; gap: 10px; }
.option-label {
    position: relative; display: flex; align-items: center;
    padding: 14px 16px; border: 2px solid var(--border);
    border-radius: 8px; cursor: pointer; transition: all 0.2s ease; background: var(--bg-card);
}

.option-label:hover {
    border-color: var(--primary-medium);
    background-color: var(--bg-active);
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.option-label input { position: absolute; opacity: 0; cursor: pointer; height: 0; width: 0; }
.checkmark {
    height: 20px; width: 20px; background-color: var(--bg-card);
    border: 2px solid var(--gray-300); border-radius: 50%; margin-right: 15px; flex-shrink: 0;
    position: relative; transition: all 0.2s;
}
input[type="checkbox"] ~ .checkmark { border-radius: 4px; }
.option-label:has(input:checked) { 
    border-color: var(--primary); 
    background-color: var(--primary-pale);
    box-shadow: 0 2px 8px rgba(79, 70, 229, 0.15);
}
.option-label input:checked ~ .checkmark { background-color: var(--primary); border-color: var(--primary); }
.option-label input:checked ~ .checkmark::after { content: ""; position: absolute; display: block; }
input[type="radio"] ~ .checkmark::after { top: 5px; left: 5px; width: 6px; height: 6px; border-radius: 50%; background: white; }
input[type="checkbox"] ~ .checkmark::after { left: 6px; top: 2px; width: 4px; height: 9px; border: solid white; border-width: 0 2px 2px 0; transform: rotate(45deg); }

/* ç»“æœåé¦ˆ */
.result-box {
    margin-top: 15px; 
    padding: 12px 16px; 
    border-radius: var(--radius-sm);
    font-size: 0.9rem; 
    display: none; 
    animation: fadeIn 0.3s ease;
    border-left: 4px solid transparent;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
.question-card.correct { border-color: var(--success); }
.question-card.correct .result-box { 
    background-color: var(--success-pale); 
    color: #047857; 
    border-color: var(--success);
    border-left-color: var(--success);
}
.question-card.incorrect { border-color: var(--error); }
.question-card.incorrect .result-box { 
    background-color: var(--error-pale); 
    color: #dc2626; 
    border-color: var(--error);
    border-left-color: var(--error);
}

/* ==================== ç­”é¢˜å¡å¯¼èˆªæ  ==================== */
.sidebar {
    width: var(--sidebar-width);
    position: fixed;
    right: 20px;
    top: 20px;
    height: calc(100vh - 40px);
    padding: 20px 16px;
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    z-index: 120;
    transition: width 0.22s ease, right 0.22s ease;
}

.sidebar.collapsed { width: var(--sidebar-collapsed-width); }
.sidebar .nav-section .question-nav-grid { padding-right: 6px; }

/* Toggle button */
.sidebar-toggle {
    position: absolute;
    left: -22px;
    top: 16px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid var(--border);
    background: var(--bg-card);
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: var(--text-main);
    transform: rotate(0deg);
    transition: all 0.18s ease;
}

.sidebar-toggle:hover {
    border-color: var(--primary);
    color: var(--primary);
    box-shadow: 0 2px 8px rgba(79, 70, 229, 0.15);
}
.sidebar.collapsed .sidebar-toggle { transform: rotate(180deg); }

/* æ‰‹æœºç«¯ä¾§æ å…³é—­æŒ‰é’® */
.mobile-close-btn {
    display: none;
    position: absolute;
    top: 12px;
    right: 12px;
    width: 36px;
    height: 36px;
    border-radius: 6px;
    border: 1px solid var(--border-light);
    background: var(--bg-card);
    color: var(--text-main);
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
}
.mobile-close-btn:hover { border-color: var(--primary); color: var(--primary-dark); box-shadow: 0 4px 12px rgba(0,0,0,0.12); }

.sidebar h3 {
    font-size: 1.1rem;
    margin-bottom: 15px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--primary);
    color: var(--primary);
    font-weight: 700;
    letter-spacing: 0.5px;
}

.question-nav-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: flex-start;
}

.nav-section { margin-bottom: 10px; }
.nav-section-title { font-size: 0.95rem; color: var(--text-main); margin-bottom: 8px; font-weight: 700; letter-spacing: 0.3px; }
.nav-section hr { margin: 8px 0; border: none; height: 1px; background: var(--border); }

/* æ¯ä¸ªå°èŠ‚å†…çš„å¯¼èˆªç½‘æ ¼ç‹¬ç«‹å¯æ»šåŠ¨ï¼Œä¼˜åŒ–å°ºå¯¸ */
.nav-section .question-nav-grid {
    max-height: calc((100vh - 140px) / 2);
    overflow-y: auto;
    padding: 6px; /* ç»™å†…éƒ¨ç•™ç™½ */
    gap: 8px;
}

/* æŠ˜å æ€éšè—å°èŠ‚æ ‡é¢˜å¹¶è®©ç½‘æ ¼å¡«æ»¡ */
.sidebar.collapsed .nav-section-title { display: none; }
.sidebar.collapsed .nav-section .question-nav-grid { max-height: calc(100vh - 56px); }

.q-nav-button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: 36px;
    height: 36px;
    border-radius: 6px;
    background-color: var(--gray-100); /* æœªä½œç­”é¢œè‰² */
    color: var(--text-light);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.18s ease;
    text-decoration: none;
    flex-shrink: 0;
    font-size: 0.95rem;
    border: 2px solid var(--gray-200);
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.q-nav-button:hover {
    background-color: var(--gray-200);
    color: var(--text-main);
    border-color: var(--gray-300);
    transform: translateY(-2px);
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}

.q-nav-button.answered {
    background-color: var(--primary);
    color: white;
    border-color: var(--primary);
    box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
}

/* å½“ä¾§æ æŠ˜å ï¼ŒæŒ‰é’®å†ç´§å‡‘ä¸€äº› */
.sidebar.collapsed .q-nav-button { width: 32px; height: 32px; font-size: 0.88rem; }

/* æ›´ç´§å‡‘çš„å¤šé€‰/å•é€‰åŒºåˆ†æ ·å¼ï¼ˆå¯ç»§ç»­è°ƒæ•´ï¼‰ */
/* .q-nav-button.nav-single { } */
/* .q-nav-button.nav-multi { } */

/* æäº¤åçš„çŠ¶æ€ */
.q-nav-button.correct {
    background-color: var(--success);
    color: white;
    border-color: var(--success);
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
}
.q-nav-button.incorrect {
    background-color: var(--error);
    color: white;
    border-color: var(--error);
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
}

/* åº•éƒ¨å›ºå®šæ“ä½œæ  */
.bottom-bar {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: var(--bg-card);
    padding: 15px;
    box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
    display: flex; 
    justify-content: center; 
    gap: 15px; 
    z-index: 100;
    border-top: 1px solid var(--border);
}

.btn {
    padding: 12px 30px; 
    border-radius: 30px; 
    font-weight: 600; 
    cursor: pointer;
    border: none; 
    transition: all 0.2s ease;
    font-size: 1rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

.btn:active {
    transform: translateY(0px);
}

.btn-primary {
    background-color: var(--primary); 
    color: white;
    box-shadow: 0 4px 6px rgba(79, 70, 229, 0.3); 
    flex: 1; 
    max-width: 300px;
}

.btn-primary:hover {
    background-color: var(--primary-dark);
}

.btn-secondary { 
    background-color: var(--bg-hover); 
    color: var(--text-main);
    border: 1px solid var(--border);
}

.btn-secondary:hover {
    background-color: var(--gray-200);
    border-color: var(--border-strong);
}

/* åª’ä½“æŸ¥è¯¢ï¼šé€‚é…ä¸­å°å±ä¸å¾®å±ï¼Œå¢å¼ºå“åº”å¼ä½“éªŒ */
@media (max-width: 1200px) {
    .page-wrapper { max-width: 100%; padding: 0 12px; }
}

@media (max-width: 1000px) {
    .page-wrapper {
        flex-direction: column;
        gap: 16px;
        align-items: stretch;
        padding-bottom: 140px; /* ç»™åº•éƒ¨å›ºå®šæ ç•™å‡ºç©ºé—´ */
        padding: 0 12px 140px 12px;
    }
    
    .sidebar {
        display: none !important;
        position: fixed;
        right: -85vw;
        top: 0;
        width: 85vw;
        height: 100vh;
        background: var(--bg-card);
        border-radius: 0;
        z-index: 999;
        padding: 20px;
        overflow-y: auto;
        box-shadow: -4px 0 12px rgba(0,0,0,0.15);
        transition: right 0.3s ease;
        max-width: 85vw;
        box-sizing: border-box;
    }
    
    .sidebar.mobile-open {
        display: block !important;
        right: 0;
    }
    
    .sidebar-toggle {
        left: auto;
        right: 20px;
        top: 20px;
        width: 40px;
        height: 40px;
        z-index: 1001;
    }
    
    /* æ‰“å¼€ç­”é¢˜å¡æ—¶çš„é¡µé¢è’™å±‚ */
    body.sidebar-open {
        overflow: hidden;
    }
    
    body.sidebar-open::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.3);
        z-index: 998;
        animation: fadeIn 0.3s ease;
    }
    
    .mobile-answer-card-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }
    
    .main-content {
        max-width: 100%;
        min-width: auto;
    }
    .header-hero { padding: 28px 16px 40px; }
    .header-hero h1 { font-size: 1.4rem; }
    .score-card { padding: 16px; flex-direction: column; gap: 8px; align-items: flex-start; }
    .question-card { padding: 18px; }
    .question-text { font-size: 1rem; }
    .option-label { padding: 10px 12px; }
    .checkmark { margin-right: 12px; height: 18px; width: 18px; }
    .q-nav-button { width: 36px; height: 36px; }
    .bottom-bar { flex-direction: column; gap: 10px; padding: 12px; }
    .btn { width: 100%; max-width: none; }
}

@media (max-width: 480px) {
    html { font-size: 14px; }
    .header-hero { padding: 22px 12px 28px; }
    .header-hero h1 { font-size: 1.25rem; }
    .score-card { padding: 12px; }
    .section-badge { font-size: 0.85rem; padding: 5px 10px; }
    .question-card { padding: 14px; }
    .question-text { font-size: 0.98rem; margin-bottom: 12px; }
    .option-label { padding: 10px; }
    .options-group { gap: 8px; }
    
    /* æ‰‹æœºåº•éƒ¨æŒ‰é’®æ ä¼˜åŒ– */
    .bottom-bar { 
        padding: 8px; 
        gap: 6px;
        flex-wrap: wrap;
    }
    .btn { 
        padding: 10px 12px; 
        border-radius: 8px;
        font-size: 0.9rem;
        flex: 1;
        min-width: 70px;
    }
    
    .mobile-answer-card-btn {
        min-width: unset !important;
    }
    
    /* æ‰‹æœºç­”é¢˜å¡ä¼˜åŒ– */
    .sidebar {
        width: 100% !important;
        max-width: 100% !important;
        right: -100% !important;
        padding: 16px;
    }

    .sidebar.mobile-open {
        right: 0 !important;
    }
    
    .sidebar h3 {
        font-size: 1rem;
        margin-bottom: 12px;
        padding-bottom: 10px;
    }
    
    .q-nav-button {
        width: 32px;
        height: 32px;
        font-size: 0.85rem;
    }
}

/* ==================== å†å²è®°å½•æ¨¡æ€æ¡†æ ·å¼ ==================== */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
    animation: fadeIn 0.3s ease;
}

.modal-content {
    background-color: var(--bg-card);
    margin: 5% auto;
    padding: 0;
    border-radius: var(--radius);
    width: 90%;
    max-width: 900px;
    max-height: 85vh;
    box-shadow: var(--shadow-md);
    display: flex;
    flex-direction: column;
}

.modal-header {
    padding: 20px 24px;
    border-bottom: 2px solid var(--primary);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
    background: var(--bg-active);
}

.modal-header h2 {
    margin: 0;
    color: var(--primary-dark);
    font-size: 1.5rem;
    font-weight: 700;
}

.modal-close {
    background: none;
    border: none;
    font-size: 2rem;
    color: var(--text-sub);
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.2s;
}

.modal-close:hover {
    background-color: var(--bg-body);
    color: var(--text-main);
}

.modal-body {
    padding: 24px;
    overflow-y: auto;
    flex: 1;
}

.history-controls {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--border);
}

.history-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.history-item {
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    padding: 16px;
    border: 1px solid var(--border-light);
    transition: all 0.2s;
}

.history-item:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--primary-light);
    background-color: var(--bg-active);
}

.history-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.history-item-title {
    font-weight: 600;
    color: var(--text-main);
    font-size: 1.1rem;
}

.history-item-date {
    color: var(--text-sub);
    font-size: 0.9rem;
}

.history-item-score {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--primary);
    background: var(--primary-pale);
    padding: 4px 12px;
    border-radius: var(--radius-sm);
}

.history-item-delete {
    background: var(--error);
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.2s;
    font-weight: 600;
}

.history-item-delete:hover {
    background: var(--error-light);
    transform: scale(1.05);
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
}

.option-stats {
    margin-top: 20px;
    padding: 16px;
    background: var(--primary-pale);
    border-radius: var(--radius-sm);
    border: 1px solid var(--primary-light);
}

.option-stats h3 {
    margin: 0 0 12px 0;
    color: var(--primary-dark);
    font-size: 1.1rem;
    font-weight: 700;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
}

.stat-item {
    background: var(--bg-card);
    padding: 14px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-light);
    transition: all 0.2s;
}

.stat-item:hover {
    box-shadow: var(--shadow-sm);
    border-color: var(--primary-light);
}

.stat-item-label {
    font-weight: 700;
    color: var(--text-main);
    margin-bottom: 6px;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    color: var(--text-light);
}

.stat-item-value {
    color: var(--primary);
    font-size: 1.3rem;
    font-weight: 800;
}

@media (max-width: 768px) {
    .modal-content {
        width: 95%;
        margin: 2% auto;
        max-height: 96vh;
    }
    .modal-header h2 {
        font-size: 1.2rem;
    }
    .history-item-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    .stats-grid {
        grid-template-columns: 1fr;
    }
}



    </style>

</head>
<body>

    <header class="header-hero">
        <h1>ä¹ è¿‘å¹³é€‰æ‹©</h1>
        <p>å•é€‰é¢˜ 50 é“ Â· å¤šé€‰é¢˜ 25 é“ Â· æ»¡åˆ† 100 åˆ†</p>
    </header>

    <div class="page-wrapper">
        <div class="main-content">
            <div class="score-card">
                <div class="score-info">
                    <span>å½“å‰è¿›åº¦</span>
                    <strong id="progress-text">0 / 75 é¢˜å·²ä½œç­”</strong>
                </div>
                <div class="final-score" id="finalScore">
                    å¾—åˆ†ï¼š0
                </div>
            </div>

            <form id="quizForm">
                <div class="section-badge" id="sc_title">ä¸€ã€å•é¡¹é€‰æ‹©é¢˜ (å…±50é¢˜ï¼Œæ¯é¢˜1åˆ†)</div>
                <div id="single-choice-container">
                    </div>

                <div class="section-badge" id="mc_title">äºŒã€å¤šé¡¹é€‰æ‹©é¢˜ (å…±25é¢˜ï¼Œæ¯é¢˜2åˆ†)</div>
                <div id="multi-choice-container">
                    </div>
            </form>
        </div>

        <div class="sidebar" id="sidebar">
            <button id="sidebar-toggle" class="sidebar-toggle" aria-expanded="true" title="æ”¶èµ·/å±•å¼€ç­”é¢˜å¡">â€º</button>
                <button class="mobile-close-btn" id="mobileCloseBtn" onclick="closeMobileSidebar()" aria-label="å…³é—­ç­”é¢˜å¡" title="å…³é—­ç­”é¢˜å¡" style="display:none;">âœ•</button>
                <h3>ç­”é¢˜å¡</h3>

            <div class="nav-section">
                <div class="nav-section-title">å•é¡¹é€‰æ‹©</div>
                <div class="question-nav-grid" id="question-navigator-single"></div>
            </div>

            <hr />

            <div class="nav-section">
                <div class="nav-section-title">å¤šé¡¹é€‰æ‹©</div>
                <div class="question-nav-grid" id="question-navigator-multi"></div>
            </div>
        </div>
    </div>

    <div class="bottom-bar">
        <button type="button" class="btn btn-secondary" onclick="resetQuiz()">é‡ç½®è¯•å·</button>
        <button type="button" class="btn btn-secondary mobile-answer-card-btn" id="mobileAnswerCardBtn" onclick="toggleMobileSidebar()" style="display:none;">
            <span>ğŸ“‹</span>
            <span>ç­”é¢˜å¡</span>
        </button>
        <button type="button" class="btn btn-primary" onclick="submitQuiz()">æäº¤è¯•å· & æŸ¥çœ‹å¾—åˆ†</button>
        <button type="button" class="btn btn-secondary" onclick="showHistory()">æŸ¥çœ‹å†å²è®°å½•</button>
    </div>

    <!-- å†å²è®°å½•æ¨¡æ€æ¡† -->
    <div id="historyModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ç­”é¢˜å†å²è®°å½•</h2>
                <button class="modal-close" onclick="closeHistory()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="history-controls">
                    <button type="button" class="btn btn-secondary" onclick="clearAllHistory()">ä¸€é”®åˆ é™¤æ‰€æœ‰è®°å½•</button>
                    <div class="option-stats" id="optionStats"></div>
                </div>
                <div id="historyList" class="history-list"></div>
            </div>
        </div>
    </div>

    <script >
        // ================= æ•°æ®æº =================
const singleChoiceData = [
    { id: 1, q: "æˆ‘ä»¬å…šçš„åˆå¿ƒå’Œä½¿å‘½ã€å…šé¢†å¯¼ç°ä»£åŒ–å»ºè®¾çš„å‡ºå‘ç‚¹å’Œè½è„šç‚¹æ˜¯æŒ‡", options: ["A.ä¸ºä¸­å›½äººæ°‘è°‹å¹¸ç¦ï¼Œä¸ºä¸­åæ°‘æ—è°‹å¤å…´", "B.ä¸ºäººæ°‘è°‹å¤å…´ï¼Œä¸ºæ°‘æ—è°‹å¹¸ç¦", "C.è§£æ”¾å’Œå‘å±•ç¤¾ä¼šç”Ÿäº§åŠ›ä¸ºæ‰§æ”¿å…´å›½ç¬¬ä¸€è¦åŠ¡", "D.å§‹ç»ˆåšæŒå…¨å¿ƒå…¨æ„ä¸ºäººæ°‘æœåŠ¡"], ans: "A" },
    { id: 2, q: "å…šçš„äºŒåå¤§æå‡ºçš„â€œå…­ä¸ªå¿…é¡»åšæŒâ€ä¸­ï¼Œå¿…é¡»åšæŒè‡ªä¿¡è‡ªç«‹æ˜¯", options: ["A.æ ¹æœ¬ä»·å€¼ç«‹åœº", "B.å†…åœ¨ç²¾ç¥ç‰¹è´¨", "C.é²œæ˜ç†è®ºå“æ ¼", "D.é‡è¦å®è·µè¦æ±‚"], ans: "B" },
    { id: 3, q: "é©¬å…‹æ€ä¸»ä¹‰ä¸­å›½åŒ–æ—¶ä»£åŒ–çš„â€œæ–°é£è·ƒâ€æ˜¯æŒ‡", options: ["A.æ¯›æ³½ä¸œæ€æƒ³", "B.é‚“å°å¹³ç†è®º", "C.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»", "D.ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³"], ans: "D" },
    { id: 4, q: "å°†ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ç¡®ç«‹ä¸ºå…šå¿…é¡»é•¿æœŸåšæŒçš„æŒ‡å¯¼æ€æƒ³å¹¶å†™å…¥å…šç« çš„ä¼šè®®æ˜¯", options: ["A.å…šçš„äºŒåå¤§", "B.å…šçš„åä¹å¤§", "C.å…šçš„åå…«å¤§", "D.å…šçš„åä¸ƒå¤§"], ans: "B" },
    { id: 5, q: "åšå®šä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯è‡ªä¿¡ã€ç†è®ºè‡ªä¿¡ã€åˆ¶åº¦è‡ªä¿¡ï¼Œè¯´åˆ°åº•æ˜¯è¦åšå®š", options: ["A.æ”¿æ²»è‡ªä¿¡", "B.å†å²è‡ªä¿¡", "C.æˆ˜ç•¥è‡ªä¿¡", "D.æ–‡åŒ–è‡ªä¿¡"], ans: "D" },
    { id: 6, q: "â€œå››ä¸ªå…¨é¢â€æˆ˜ç•¥å¸ƒå±€ä¸­å±…äºå¼•é¢†åœ°ä½çš„æ˜¯", options: ["A.å…¨é¢æ·±åŒ–æ”¹é©", "B.å…¨é¢ä¾æ³•æ²»å›½", "C.å…¨é¢ä»ä¸¥æ²»å…š", "D.å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶"], ans: "D" },
    { id: 7, q: "â€œä¸¤ä¸ªç¡®ç«‹â€çš„å…šçš„ä¼šè®®æ˜¯", options: ["A.åä¹å¤§", "B.åä¹å±Šå…­ä¸­å…¨ä¼š", "C.äºŒåå¤§", "D.åä¹å±Šäº”ä¸­å…¨ä¼š"], ans: "B" },
    { id: 8, q: "ä¹ è¿‘å¹³æ€»ä¹¦è®°å¼ºè°ƒï¼Œä¸­å›½æ¢¦çš„æœ¬è´¨å†…æ¶µæ˜¯", options: ["A.å›½å®¶å¯Œå¼ºã€æ°‘æ—å¤å…´ã€äººæ°‘å¹¸ç¦", "B.ç†è®ºè‡ªä¿¡ã€é“è·¯è‡ªä¿¡ã€æ–‡åŒ–è‡ªä¿¡", "C.å›½å®¶å¯Œå¼ºã€æ°‘æ—æŒ¯å…´ã€äººæ°‘å¹¸ç¦", "D.ç¥–å›½ç»Ÿä¸€ã€ç§‘æŠ€å‘è¾¾ã€ç¤¾ä¼šå’Œè°"], ans: "C" },
    { id: 9, q: "æ”¹é©å¼€æ”¾ä»¥æ¥æˆ‘ä»¬å–å¾—ä¸€åˆ‡æˆç»©å’Œè¿›æ­¥çš„æ ¹æœ¬åŸå› ä¸­ï¼Œä½œä¸ºæ ¹æœ¬ä¿éšœçš„æ˜¯", options: ["A.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯", "B.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»", "C.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦", "D.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–"], ans: "C" },
    { id: 10, q: "å…šçš„åä¹å¤§æŠ¥å‘Šä¸­æŒ‡å‡º,æˆ‘å›½ç¤¾ä¼šä¸»è¦çŸ›ç›¾è½¬åŒ–ä¸º", options: ["A.äººæ°‘æ—¥ç›Šå¢é•¿çš„ç¾å¥½ç”Ÿæ´»éœ€è¦å’Œä¸å¹³è¡¡ä¸å……åˆ†çš„æ”¹é©ä¹‹é—´çš„çŸ›ç›¾", "B.äººæ°‘æ—¥ç›Šå¢é•¿çš„ç¾å¥½ç”Ÿæ´»éœ€è¦å’Œä¸å¹³è¡¡ä¸å……åˆ†çš„å‘å±•ä¹‹é—´çš„çŸ›ç›¾", "C.äººæ°‘æ—¥ç›Šå¢é•¿çš„å¹¸ç¦ç”Ÿæ´»éœ€è¦å’Œä¸å¹³è¡¡ä¸å……åˆ†çš„æ”¹é©ä¹‹é—´çš„çŸ›ç›¾", "D.äººæ°‘æ—¥ç›Šå¢é•¿çš„å¹¸ç¦ç”Ÿæ´»éœ€è¦å’Œä¸å¹³è¡¡ä¸å……åˆ†çš„ç¨³å®šä¹‹é—´çš„çŸ›ç›¾"], ans: "B" },
    { id: 11, q: "ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦æ˜¯ä¸€ä¸ªä¸¥å¯†å®Œæ•´çš„ç§‘å­¦åˆ¶åº¦ä½“ç³»ï¼Œå…¶ä¸­å…·æœ‰ç»Ÿé¢†åœ°ä½çš„æ˜¯", options: ["A.äººæ°‘ä»£è¡¨å¤§ä¼šåˆ¶åº¦è¿™ä¸€æ ¹æœ¬æ”¿æ²»åˆ¶åº¦", "B.é©¬å…‹æ€ä¸»ä¹‰åœ¨æ„è¯†å½¢æ€é¢†åŸŸæŒ‡å¯¼åœ°ä½çš„æ ¹æœ¬åˆ¶åº¦", "C.ç¤¾ä¼šä¸»ä¹‰åŸºæœ¬ç»æµåˆ¶åº¦", "D.å…šçš„é¢†å¯¼åˆ¶åº¦"], ans: "D" },
    { id: 12, q: "ä¹ è¿‘å¹³æ€»ä¹¦è®°å¼ºè°ƒï¼Œä¸­å›½æ¢¦çš„æœ¬è´¨å†…æ¶µæ˜¯", options: ["A.å›½å®¶å¯Œå¼ºã€æ°‘æ—å¤å…´ã€äººæ°‘å¹¸ç¦", "B.ç†è®ºè‡ªä¿¡ã€é“è·¯è‡ªä¿¡ã€æ–‡åŒ–è‡ªä¿¡", "C.å›½å®¶å¯Œå¼ºã€æ°‘æ—æŒ¯å…´ã€äººæ°‘å¹¸ç¦", "D.ç¥–å›½ç»Ÿä¸€ã€ç§‘æŠ€å‘è¾¾ã€ç¤¾ä¼šå’Œè°"], ans: "C" },
    { id: 13, q: "å…šçš„åå…«å¤§ä»¥æ¥,ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è¿›å…¥æ–°æ—¶ä»£ï¼Œè¿™æ˜¯æˆ‘å›½å‘å±•æ–°çš„", options: ["A.å†å²æ–¹ä½", "B.æˆ˜ç•¥æ–¹å‘", "C.æˆ˜ç•¥æ ¼å±€", "D.å†å²ç»´åº¦"], ans: "A" },
    { id: 14, q: "ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æœ‰å¾ˆå¤šç‰¹ç‚¹å’Œç‰¹å¾,å…¶ä¸­æœ€æœ¬è´¨çš„ç‰¹å¾æ˜¯", options: ["A.ä»¥äººæ°‘ä¸ºä¸­å¿ƒ", "B.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯", "C.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦", "D.ä¸­å›½å…±äº§å…šé¢†å¯¼"], ans: "D" },
    { id: 15, q: "åœ¨â€œäº”ä¸ªå¿…ç”±ä¹‹è·¯â€ä¸­ï¼Œä¸­å›½äººæ°‘åˆ›é€ å†å²ä¼Ÿä¸šçš„å¿…æœ‰ä¹‹è·¯æ˜¯", options: ["A.åšæŒå…šçš„å…¨é¢é¢†å¯¼", "B.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰", "C.è´¯å½»æ–°å‘å±•ç†å¿µ", "D.å›¢ç»“å¥‹æ–—"], ans: "D" },
    { id: 16, q: "æˆ‘ä»¬å…šåšå¥½ä¸€åˆ‡å·¥ä½œçš„ä»·å€¼å–å‘å’Œæ ¹æœ¬æ ‡å‡†æ˜¯", options: ["A.ä¿ƒè¿›å›½æ°‘ç»æµå‘å±•", "B.è®©ç¾¤ä¼—æ»¡æ„", "C.å¢å¼ºå›½é™…å½±å“åŠ›", "D.ç»´æŠ¤å›½å®¶é•¿æ²»ä¹…å®‰"], ans: "B" },
    { id: 17, q: "é©¬å…‹æ€ä¸»ä¹‰æ”¿å…šç¬¬ä¸€ä½çš„èƒ½åŠ›æ˜¯", options: ["A.æ€æƒ³å¼•é¢†åŠ›", "B.æ”¿æ²»é¢†å¯¼åŠ›", "C.ç¤¾ä¼šå·å¬åŠ›", "D.ç¾¤ä¼—ç»„ç»‡åŠ›"], ans: "B" },
    { id: 18, q: "æˆ‘å›½æ ¹æœ¬æ”¿æ²»åˆ¶åº¦æ˜¯", options: ["A.äººæ°‘ä»£è¡¨å¤§ä¼š", "B.å…šçš„å…¨é¢é¢†å¯¼", "C.äººæ°‘æ°‘ä¸»ä¸“æ”¿", "D.äººæ°‘ä»£è¡¨å¤§ä¼šåˆ¶åº¦"], ans: "D" },
    { id: 19, q: "å…šçš„é¢†å¯¼çš„æœ€é«˜åŸåˆ™æ˜¯", options: ["A.å…šä¸­å¤®é›†ä¸­ç»Ÿä¸€é¢†å¯¼", "B.åˆ¶åº¦æ²»å…šã€ä¾è§„æ²»å…š", "C.åšå®šç†æƒ³ä¿¡å¿µ", "D.å‹‡äºè‡ªæˆ‘é©å‘½"], ans: "A" },
    { id: 20, q: "ä¸­å›½å…±äº§å…šä¸ºä»€ä¹ˆèƒ½ï¼Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ä¸ºä»€ä¹ˆå¥½ï¼Œå½’æ ¹åˆ°åº•æ˜¯", options: ["A.ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´å°±èƒ½å®ç°", "B.ä¸­å›½å…±äº§å…šä¸ºä»€ä¹ˆèƒ½", "C.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ä¸ºä»€ä¹ˆå¥½", "D.é©¬å…‹æ€ä¸»ä¹‰è¡Œ"], ans: "D" },
    { id: 21, q: "é©¬å…‹æ€ä¸»ä¹‰æ”¿å…šåŒºåˆ«äºèµ„äº§é˜¶çº§æ”¿å…šçš„æ˜¾è‘—æ ‡å¿—æ˜¯", options: ["A.å…¬æ°‘ç«‹åœº", "B.äººæ°‘ç«‹åœº", "C.æ”¿æ²»ç«‹åœº", "D.ç»æµç«‹åœº"], ans: "B" },
    { id: 22, q: "æ–°æ—¶ä»£åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„æ ¹æœ¬ç«‹åœºæ˜¯", options: ["A.åšæŒä»¥äººæ°‘ä¸ºä¸­å¿ƒ", "B.åšæŒä»¥ç»æµå»ºè®¾ä¸ºä¸­å¿ƒ", "C.åšæŒå››é¡¹åŸºæœ¬åŸåˆ™", "D.åšæŒæ”¹é©å¼€æ”¾"], ans: "A" },
    { id: 23, q: "æ­£ç¡®å¤„ç†æ”¹é©ã€å‘å±•ã€ç¨³å®šçš„å…³ç³»ï¼Œç»“åˆç‚¹æ˜¯", options: ["A.ä¸æ–­å¼€è¾Ÿå‘å±•æ–°é¢†åŸŸã€æ–°èµ›é“", "B.äººçš„è‡ªç”±è€Œå…¨é¢çš„å‘å±•", "C.åšæŒå®ˆæ­£åˆ›æ–°", "D.æ”¹å–„äººæ°‘ç”Ÿæ´»"], ans: "D" },
    { id: 24, q: "å‘å±•çš„å‡ºå‘ç‚¹å’Œè½è„šç‚¹æ˜¯", options: ["A.æ»¡è¶³äººæ°‘å¯¹ç¾å¥½ç”Ÿæ´»çš„æ–°æœŸå¾…", "B.ä¸æ–­å®ç°ç†è®ºå’Œå®è·µä¸Šçš„åˆ›æ–°çªç ´", "C.å®Œå–„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦", "D.æ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›çš„ç°ä»£åŒ–"], ans: "A" },
    { id: 25, q: "è´¯å½»æ–°å‘å±•ç†å¿µï¼ŒåšæŒçš„å‘å±•ä¸»çº¿æ˜¯", options: ["A.è½¬å˜å‘å±•æ–¹å¼", "B.ä¼˜åŒ–ç»æµç»“æ„", "C.ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©", "D.è½¬æ¢å¢é•¿åŠ¨åŠ›"], ans: "C" },
    { id: 26, q: "å…¨é¢æ·±åŒ–æ”¹é©å¼€æ”¾çš„ä¸»çº¿æ˜¯", options: ["A.é‡ç‚¹é¢†åŸŸå’Œå…³é”®ç¯èŠ‚æ”¹é©", "B.ç»æµä½“åˆ¶æ”¹é©", "C.åˆ¶åº¦å»ºè®¾", "D.ç»Ÿç­¹æ”¹é©ã€å‘å±•ã€ç¨³å®š"], ans: "C" },
    { id: 27, q: "ä¸­å›½å…±äº§å…šçš„æ ¹æœ¬ç»„ç»‡åŸåˆ™å’Œé¢†å¯¼åˆ¶åº¦æ˜¯", options: ["A.å…šå†…æ³•è§„", "B.æ”¿æ²»çºªå¾‹", "C.å…šç« ", "D.æ°‘ä¸»é›†ä¸­åˆ¶"], ans: "D" },
    { id: 28, q: "å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ•™è‚²å¼ºå›½çš„æ ¹æœ¬ä»»åŠ¡æ˜¯", options: ["A.ç«‹å¾·æ ‘äºº", "B.ä¸ºå…šè‚²äººã€ä¸ºå›½è‚²æ‰", "C.æœåŠ¡ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´", "D.æ”¯æ’‘å¼•é¢†ä¸­å›½å¼ç°ä»£åŒ–"], ans: "A" },
    { id: 29, q: "ç»Ÿç­¹æ¨è¿›å„é¢†åŸŸå„æ–¹é¢æ”¹é©å¼€æ”¾çš„çªç ´å£æ˜¯", options: ["A.åˆ¶åº¦å»ºè®¾", "B.é‡ç‚¹é¢†åŸŸå’Œå…³é”®ç¯èŠ‚æ”¹é©", "C.ç»æµä½“åˆ¶æ”¹é©", "D.æ–‡åŒ–ä½“åˆ¶æ”¹é©"], ans: "B" },
    { id: 30, q: "æ–°æ—¶ä»£æˆ‘å›½æ°‘ä¸»æ”¿æ²»é¢†åŸŸå…·æœ‰é‡å¤§åˆ›æ–°æ„ä¹‰çš„æ ‡å¿—æ€§æˆæœæ˜¯", options: ["A.åå•†æ°‘ä¸»", "B.ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»å‘å±•é“è·¯", "C.å…šå†…æ°‘ä¸»", "D.å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»"], ans: "D" },
    { id: 31, q: "å¯Œæœ‰ä¸­å›½ç‰¹è‰²ã€ç¬¦åˆä¸­å›½å›½æƒ…çš„æ”¹é©æ–¹æ³•æ˜¯", options: ["A.æ‘¸ç€çŸ³å¤´è¿‡æ²³", "B.æ­£ç¡®å¤„ç†æ”¹é©ã€å‘å±•ã€ç¨³å®šçš„å…³ç³»", "C.åŠ å¼ºé¡¶å±‚è®¾è®¡", "D.æ”¹é©ä¸æ³•æ²»åŒæ­¥æ¨è¿›"], ans: "A" },
    { id: 32, q: "å…¨é¢æ¨è¿›ä¾æ³•æ²»å›½çš„æ€»æŠ“æ‰‹æ˜¯", options: ["A.å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ä½“ç³»", "B.å»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶", "C.åšæŒä¾æ³•æ²»å›½ã€ä¾æ³•æ‰§æ”¿ã€ä¾æ³•è¡Œæ”¿å…±åŒæ¨è¿›", "D.åšæŒæ³•æ²»å›½å®¶ã€æ³•æ²»æ”¿åºœã€æ³•æ²»ç¤¾ä¼šä¸€ä½“å»ºè®¾"], ans: "A" },
    { id: 33, q: "å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶...å…¶ä¸­ï¼Œç§‘æŠ€æ˜¯", options: ["A.ç¬¬ä¸€ç”Ÿäº§åŠ›", "B.ç¬¬ä¸€èµ„æº", "C.ç¬¬ä¸€åŠ¨åŠ›", "D.ç¬¬ä¸€è·¯å¾„"], ans: "A" },
    { id: 34, q: "å…šçš„åŸºæœ¬è·¯çº¿...å…¶ä¸­å¼ºè°ƒå¿…é¡»åšæŒçš„ä¸­å¿ƒå·¥ä½œæ˜¯", options: ["A.ç»æµå»ºè®¾", "B.ä»ä¸¥æ²»å…š", "C.æ”¹é©å¼€æ”¾", "D.å›½å®¶ç»Ÿä¸€"], ans: "A" },
    { id: 35, q: "å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶ï¼Œå‡ºå‘ç‚¹å’Œè½è„šç‚¹æ˜¯", options: ["A.è®©äººæ°‘ç”Ÿæ´»è¶Šè¿‡è¶Šå¥½", "B.å›½å®¶å¯Œå¼ºã€æ°‘æ—æŒ¯å…´", "C.å›½å®¶é•¿æ²»ä¹…å®‰ã€ç¤¾ä¼šå®‰å®šæœ‰åº", "D.è§£æ”¾å’Œå¢å¼ºç¤¾ä¼šæ´»åŠ›"], ans: "A" },
    { id: 36, q: "åšå®šä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦è‡ªä¿¡,é¦–å…ˆè¦", options: ["A.åšå®šå¯¹ç¤¾ä¼šä¸»ä¹‰åŸºæœ¬ç»æµåˆ¶åº¦çš„è‡ªä¿¡", "B.åšå®šå¯¹ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»åˆ¶åº¦çš„è‡ªä¿¡", "C.åšå®šå¯¹ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–çš„è‡ªä¿¡", "D.åšå®šå¯¹é©¬å…‹æ€ä¸»ä¹‰ç«‹åœºè§‚ç‚¹æ–¹æ³•çš„è‡ªä¿¡"], ans: "B" },
    { id: 37, q: "åŠ å¿«æ¨è¿›äººæ‰å¼ºå›½æˆ˜ç•¥ï¼Œæ ‘ç«‹äººæ‰èµ„æºæ˜¯", options: ["A.ç¬¬ä¸€åŠ¨åŠ›çš„ç†å¿µ", "B.é¦–è¦èµ„æºçš„ç†å¿µ", "C.ç¬¬ä¸€èµ„æºçš„ç†å¿µ", "D.ç¬¬ä¸€æˆ˜ç•¥è¦ç´ çš„ç†å¿µ"], ans: "C" },
    { id: 38, q: "ä¿éšœå’Œæ”¹å–„æ°‘ç”Ÿçš„é‡è¦æ–¹é’ˆæ˜¯", options: ["A.åšæŒå°½åŠ›è€Œä¸ºã€é‡åŠ›è€Œè¡Œ", "B.åšæŒåº•çº¿ã€çªå‡ºé‡ç‚¹", "C.å®Œå–„åˆ¶åº¦ã€å¼•å¯¼é¢„æœŸ", "D.åšæŒäººäººå°½è´£ã€äººäººäº«æœ‰"], ans: "A" },
    { id: 39, q: "ä¸€ä¸ªå›½å®¶ã€ä¸€ä¸ªæ°‘æ—ç”Ÿå­˜ä¸è¿›æ­¥å¿…é¡»å¤„ç†å¥½çš„é¦–è¦é—®é¢˜æ˜¯", options: ["A.å‘å±•å’Œå®‰å…¨", "B.æ•ˆç›Šå’Œé€Ÿåº¦", "C.å‘å±•å’Œç¨³å®š", "D.æ”¹é©å’Œå¼€æ”¾"], ans: "A" },
    { id: 40, q: "ç”Ÿæ€ç¯å¢ƒé—®é¢˜å½’æ ¹åˆ°åº•æ˜¯", options: ["A.æ”¿åºœä¸å¸‚åœºçš„å…³ç³»é—®é¢˜", "B.äººä¸ç¤¾ä¼šçš„å…³ç³»é—®é¢˜", "C.äººä¸äººçš„å…³ç³»é—®é¢˜", "D.ç»æµå‘å±•æ–¹å¼å’Œç”Ÿæ´»æ–¹å¼é—®é¢˜"], ans: "D" },
    { id: 41, q: "æ°‘æ—å¤å…´çš„æ ¹åŸºæ˜¯", options: ["A.å›½å®¶å®‰å…¨", "B.ç¤¾ä¼šç¨³å®š", "C.æ°‘æ—å›¢ç»“", "D.äººæ°‘å¹¸ç¦"], ans: "A" },
    { id: 42, q: "æ€»ä½“å›½å®¶å®‰å…¨è§‚çš„æ ¹æœ¬æ˜¯", options: ["A.äººæ°‘å®‰å…¨", "B.æ”¿æ²»å®‰å…¨", "C.ç»æµå®‰å…¨", "D.å†›äº‹å®‰å…¨"], ans: "B" },
    { id: 43, q: "äººæ°‘å†›é˜Ÿçš„é²œæ˜ç‰¹è‰²å’Œæ”¿æ²»ä¼˜åŠ¿...æ˜¯", options: ["A.å¬å…šæŒ‡æŒ¥", "B.èƒ½æ‰“èƒœä»—", "C.ä½œé£ä¼˜è‰¯", "D.æœ¬é¢†è¿‡ç¡¬"], ans: "C" },
    { id: 44, q: "åšæŒå…šå¯¹äººæ°‘å†›é˜Ÿç»å¯¹é¢†å¯¼çš„æ ¹æœ¬åˆ¶åº¦å’Œæ ¹æœ¬å®ç°å½¢å¼æ˜¯", options: ["A.æ”¯éƒ¨å»ºåœ¨è¿ä¸Š", "B.æ”¿æ²»å§”å‘˜åˆ¶", "C.å†›å§”ä¸»å¸­è´Ÿè´£åˆ¶", "D.é¦–é•¿åˆ†å·¥è´Ÿè´£åˆ¶"], ans: "C" },
    { id: 45, q: "ä¸¤å²¸å…³ç³»çš„æ”¿æ²»åŸºç¡€æ˜¯", options: ["A.å®ç°æ°‘æ—å¤å…´", "B.åå¯¹â€œå°ç‹¬â€", "C.ä¸€ä¸ªä¸­å›½åŸåˆ™", "D.å’Œå¹³ç»Ÿä¸€"], ans: "C" },
    { id: 46, q: "åœ¨æ–°æ—¶ä»£å…šè§£å†³å°æ¹¾é—®é¢˜çš„æ€»ä½“æ–¹ç•¥ä¸­ï¼Œä½œä¸ºç»Ÿä¸€çš„æˆ˜ç•¥æ”¯æ’‘çš„æ˜¯", options: ["A.åšæŒå†³ä¸æ‰¿è¯ºæ”¾å¼ƒä½¿ç”¨æ­¦åŠ›", "B.åšæŒç²‰ç¢â€œå°ç‹¬â€åˆ†è£‚å›¾è°‹", "C.åšæŒå›¢ç»“å°æ¹¾åŒèƒã€äº‰å–å°æ¹¾æ°‘å¿ƒ", "D.åšæŒåå¯¹å¤–éƒ¨åŠ¿åŠ›å¹²æ¶‰"], ans: "A" },
    { id: 47, q: "æˆ‘ä»¬å…šè·³å‡ºæ²»ä¹±å…´è¡°å†å²å‘¨æœŸç‡çš„ç¬¬äºŒä¸ªç­”æ¡ˆæ˜¯", options: ["A.å…¨é¢ä¾æ³•æ²»å›½", "B.å…¨é¢æ·±åŒ–æ”¹é©", "C.å…šçš„è‡ªæˆ‘é©å‘½", "D.äººæ°‘ç›‘ç£æ”¿åºœ"], ans: "C" },
    { id: 48, q: "ä¸­å›½å…±äº§å…šåŒºåˆ«äºå…¶ä»–æ”¿å…šçš„æ˜¾è‘—æ ‡å¿—ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å…šæœ€å¤§çš„ä¼˜åŠ¿...æ˜¯", options: ["A.å‹‡äºè‡ªæˆ‘é©å‘½", "B.å¯†åˆ‡è”ç³»ç¾¤ä¼—", "C.ç‹¬ç«‹è‡ªä¸»", "D.å®ˆæ­£åˆ›æ–°"], ans: "A" },
    { id: 49, q: "äººæ°‘å†›é˜Ÿçš„å»ºå†›ä¹‹æœ¬ã€å¼ºå†›ä¹‹é­‚æ˜¯", options: ["A.æ”¿æ²»å·¥ä½œ", "B.ç»ƒå…µå¤‡æˆ˜", "C.å…ˆè¿›ç§‘æŠ€", "D.å…šçš„ç»å¯¹é¢†å¯¼"], ans: "D" },
    { id: 50, q: "ç”Ÿæ€ç³»ç»Ÿæ˜¯ä¸€ä¸ªç³»ç»Ÿæ•´ä½“ï¼Œå±±æ°´æ—ç”°æ¹–è‰æ²™æ„æˆç›¸äº’ä¾å­˜ã€æœ‰æœºè”ç³»çš„", options: ["A.æ•´ä½“", "B.æœ‰æœºä½“", "C.ç»Ÿä¸€ä½“", "D.ç”Ÿå‘½å…±åŒä½“"], ans: "D" },
];

const multiChoiceData = [
    { id: 1, q: "ä¸­å›½å¼ç°ä»£åŒ–", options: ["A.æ·±æ·±æ¤æ ¹äºä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ–", "B.ä½“ç°ç§‘å­¦ç¤¾ä¼šä¸»ä¹‰çš„å…ˆè¿›æœ¬è´¨", "C.å€Ÿé‰´å¸æ”¶ä¸€åˆ‡äººç±»ä¼˜ç§€æ–‡æ˜æˆæœ", "D.ä»£è¡¨äººç±»æ–‡æ˜è¿›æ­¥çš„å‘å±•æ–¹å‘"], ans: ["A", "B", "C", "D"] },
    { id: 2, q: "åšæŒæŠŠé©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬åŸç†åŒ", options: ["A.ä¸­å›½å…·ä½“å®é™…ç›¸ç»“åˆ", "B.ä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ–ç›¸ç»“åˆ", "C.ä¸­å›½ç²¾ç¥ç›¸ç»“åˆ", "D.æ°‘æ—ç‰¹è‰²ç›¸ç»“åˆ"], ans: ["A", "B"] },
    { id: 3, q: "å…šçš„é¢†å¯¼æ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æœ€æœ¬è´¨ç‰¹å¾ï¼Œå› ä¸ºå…šçš„é¢†å¯¼æ˜¯", options: ["A.å˜åŒ–çš„", "B.å…¨é¢çš„", "C.æ•´ä½“çš„", "D.ç³»ç»Ÿçš„"], ans: ["B", "C", "D"] },
    { id: 4, q: "ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ä¹‹æ‰€ä»¥æ˜¯ç¤¾ä¼šä¸»ä¹‰ï¼Œç©¶å…¶æ ¹æœ¬å°±åœ¨äº", options: ["A.åšæŒç§‘å­¦ç¤¾ä¼šä¸»ä¹‰åŸºæœ¬åŸåˆ™", "B.åšæŒä¸­å›½å…±äº§å…šé¢†å¯¼", "C.åšæŒä»¥äººæ°‘ä¸ºä¸­å¿ƒ", "D.åšæŒæ·±åŒ–æ”¹é©å¼€æ”¾"], ans: ["A", "B"] },
    { id: 5, q: "åå…«å¤§ä»¥æ¥...ä¸»è¦è¡¨ç°åœ¨", options: ["A.åœ¨è®¤è¯†ä¸Šä¸æ–­æ·±åŒ–", "B.åœ¨æˆ˜ç•¥ä¸Šä¸æ–­å®Œå–„", "C.åœ¨ä½“åˆ¶ä¸Šä¸æ–­è°ƒæ•´", "D.åœ¨å®è·µä¸Šä¸æ–­ä¸°å¯Œ"], ans: ["A", "B", "D"] },
    { id: 6, q: "åšæŒä»¥äººæ°‘ä¸ºä¸­å¿ƒã€‚ä»¥ä¸‹è¯´æ³•æ­£ç¡®çš„æœ‰", options: ["A.äººæ°‘ç«‹åœºæ˜¯ä¸­å›½å…±äº§å…šçš„æ ¹æœ¬æ”¿æ²»ç«‹åœº", "B.äººæ°‘ç«‹åœºæ˜¯æˆ‘ä»¬å…šåŒºåˆ«äºå…¶ä»–æ”¿å…šçš„æ˜¾è‘—æ ‡å¿—", "C.äººæ°‘æ˜¯ä¸­å›½å…±äº§å…šæ‰§æ”¿çš„æœ€å¤§åº•æ°”ã€æœ€æ·±åšçš„æ ¹åŸº", "D.åšæŒäººæ°‘è‡³ä¸Šæ˜¯æ–°æ—¶ä»£å…šæ²»å›½ç†æ”¿çš„æ ¹æœ¬ä»·å€¼å–å‘"], ans: ["A", "B", "C", "D"] },
    { id: 7, q: "æ‰å®æ¨è¿›å…±åŒå¯Œè£•å¿…é¡»åšæŒçš„åŸåˆ™æ˜¯", options: ["A.é¼“åŠ±å‹¤åŠ³åˆ›æ–°è‡´å¯Œ", "B.åšæŒåŸºæœ¬ç»æµåˆ¶åº¦", "C.å°½åŠ›è€Œä¸ºã€é‡åŠ›è€Œè¡Œ", "D.åšæŒå¾ªåºæ¸è¿›"], ans: ["A", "B", "C", "D"] },
    { id: 8, q: "å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»æ˜¯", options: ["A.å…¨é“¾æ¡ã€å…¨æ–¹ä½ã€å…¨è¦†ç›–çš„æ°‘ä¸»", "B.æœ€å¹¿æ³›ã€æœ€çœŸå®ã€æœ€ç®¡ç”¨çš„æ°‘ä¸»", "C.æœ€çº¯ç²¹ã€æœ€å…ˆè¿›ã€æœ€å¥½çš„æ°‘ä¸»", "D.åå•†æ°‘ä¸»ã€é€‰ä¸¾æ°‘ä¸»ã€äººäººæ°‘ä¸»çš„ç»Ÿä¸€"], ans: ["A", "B"] },
    { id: 9, q: "å½“å‰æˆ‘å›½ç»æµå‘å±•æ‰€å¤„çš„é˜¶æ®µæ˜¯", options: ["A.å¢é•¿é€Ÿåº¦æ¢æŒ¡æœŸ", "B.ç»“æ„è°ƒæ•´é˜µç—›æœŸ", "C.è´¨é‡è½¬å‹æå‡æœŸ", "D.å‰æœŸåˆºæ¿€æ”¿ç­–æ¶ˆåŒ–æœŸ"], ans: ["A", "B", "D"] },
    { id: 10, q: "æ–°æ—¶ä»£åŠ å¼ºå’Œåˆ›æ–°ç¤¾ä¼šæ²»ç†ï¼Œè¦æ±‚åšæŒ", options: ["A.ç³»ç»Ÿæ²»ç†", "B.ä¾æ³•æ²»ç†", "C.ç»¼åˆæ²»ç†", "D.æºå¤´æ²»ç†"], ans: ["A", "B", "C", "D"] },
    { id: 11, q: "ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯çš„æ ¸å¿ƒè¦ä¹‰æ˜¯", options: ["A.åšæŒå…šçš„é¢†å¯¼", "B.åšæŒä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦", "C.è´¯å½»ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ç†è®º", "D.åšæŒç¤¾ä¼šä¸»ä¹‰æ ¹æœ¬åˆ¶åº¦"], ans: ["A", "B", "C"] },
    { id: 12, q: "æ€»ä½“å›½å®¶å®‰å…¨è§‚...æˆ‘ä»¬åº”è¯¥åšæŒçš„æ€ç»´æ˜¯", options: ["A.å‘æ•£æ€ç»´", "B.åº•çº¿æ€ç»´", "C.æé™æ€ç»´", "D.æ³•æ²»æ€ç»´"], ans: ["B", "C"] },
    { id: 13, q: "ä¸€ä¸ªå›½å®¶çš„æ–‡åŒ–è½¯å®åŠ›ï¼Œä»æ ¹æœ¬ä¸Šè¯´ï¼Œå–å†³äºå…¶æ ¸å¿ƒä»·å€¼è§‚çš„", options: ["A.ç”Ÿå‘½åŠ›", "B.å‡èšåŠ›", "C.å½±å“åŠ›", "D.æ„Ÿå¬åŠ›"], ans: ["A", "B", "D"] },
    { id: 14, q: "åˆ°2035å¹´...è¿™ä¸€æ­¥çš„å…³é”®æ˜¯å®ç°", options: ["A.å†›äº‹ç†è®ºç°ä»£åŒ–", "B.å†›é˜Ÿç»„ç»‡å½¢æ€ç°ä»£åŒ–", "C.å†›äº‹äººå‘˜ç°ä»£åŒ–", "D.æ­¦å™¨è£…å¤‡ç°ä»£åŒ–"], ans: ["A", "B", "C", "D"] },
    { id: 15, q: "æ€»ä½“å›½å®¶å®‰å…¨è§‚...åšæŒçš„æ€ç»´æ˜¯(åŒç¬¬12é¢˜)", options: ["A.å‘æ•£æ€ç»´", "B.åº•çº¿æ€ç»´", "C.æé™æ€ç»´", "D.æ³•æ²»æ€ç»´"], ans: ["B", "C"] },
    { id: 16, q: "æˆ‘å›½å»ºè®¾æ•™è‚²å¼ºå›½è¦åšæŒçš„åŸºæœ¬åŸåˆ™æ˜¯", options: ["A.åšæŒç¤¾ä¼šä¸»ä¹‰åŠå­¦æ–¹å‘", "B.åšæŒæŠŠç«‹å¾·æ ‘äººä½œä¸ºæ ¹æœ¬ä»»åŠ¡", "C.åšæŒå…šå¯¹æ•™è‚²äº‹ä¸šçš„å…¨é¢é¢†å¯¼", "D.åšæŒæ‰æ ¹ä¸­å›½å¤§åœ°åŠæ•™è‚²"], ans: ["A", "B", "C", "D"] },
    { id: 17, q: "è¦å¼•å¯¼å„æ—äººæ°‘ç‰¢å›ºæ ‘ç«‹æŠŠæ¡çš„å…±åŒä½“ç†å¿µæ˜¯", options: ["A.ç”Ÿæ­»ä¸å…±", "B.å‘½è¿ä¸å…±", "C.ä¼‘æˆšä¸å…±", "D.è£è¾±ä¸å…±"], ans: ["A", "B", "C", "D"] },
    { id: 18, q: "æ§åˆ¶çº¿æŒ‡çš„æ˜¯", options: ["A.ç”Ÿæ€ä¿æŠ¤çº¢çº¿", "B.è‡ªç„¶ä¿æŠ¤åŒº", "C.æ°¸ä¹…åŸºæœ¬å†œç”°", "D.åŸé•‡å¼€å‘è¾¹ç•Œ"], ans: ["A", "C", "D"] },
    { id: 19, q: "â€œä¸€å›½ä¸¤åˆ¶â€çš„æ ¹æœ¬å®—æ—¨æ˜¯", options: ["A.ç»´æŠ¤å›½å®¶ä¸»æƒã€å®‰å…¨ã€å‘å±•åˆ©ç›Š", "B.ä¿æŒé¦™æ¸¯ã€æ¾³é—¨é•¿æœŸç¹è£ç¨³å®š", "C.ç»´æŠ¤å°æµ·å’Œå¹³ç¨³å®š", "D.å¢å¼ºä¸­åå„¿å¥³å¯¹ä¼Ÿå¤§ç¥–å›½çš„è®¤åŒæ„Ÿ"], ans: ["A", "B"] },
    { id: 20, q: "â€œä¸€å›½â€ä¸â€œä¸¤åˆ¶â€çš„å…³ç³»æ˜¯", options: ["A.â€œä¸€å›½â€æ˜¯å®è¡Œâ€œä¸¤åˆ¶â€çš„å‰æ", "B.â€œä¸¤åˆ¶â€æ˜¯å®è¡Œâ€œä¸€å›½â€çš„åŸºç¡€", "C.â€œä¸¤åˆ¶â€ä»å±å’Œæ´¾ç”Ÿäºâ€œä¸€å›½â€", "D.â€œä¸¤åˆ¶â€ç»Ÿä¸€äºâ€œä¸€å›½ä¹‹å†…â€"], ans: ["A", "C", "D"] },
    { id: 21, q: "å…šçš„æ”¿æ²»å»ºè®¾çš„é¦–è¦ä»»åŠ¡æ˜¯", options: ["A.ä¿è¯å…¨å…šæœä»ä¸­å¤®", "B.æ—¶åˆ»ä¿æŒè§£å†³å¤§å…šç‹¬æœ‰éš¾é¢˜çš„æ¸…é†’å’Œåšå®š", "C.ç»´æŠ¤å…šä¸­å¤®æƒå¨å’Œé›†ä¸­ç»Ÿä¸€é¢†å¯¼", "D.ä»¥ä¼Ÿå¤§è‡ªæˆ‘é©å‘½å¼•é¢†ä¼Ÿå¤§ç¤¾ä¼šé©å‘½"], ans: ["A", "C"] },
    { id: 22, q: "å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»æ˜¯", options: ["A.è¿‡ç¨‹æ°‘ä¸»å’Œæˆæœæ°‘ä¸»çš„ç»Ÿä¸€", "B.ç¨‹åºæ°‘ä¸»å’Œå®è´¨æ°‘ä¸»çš„ç»Ÿä¸€", "C.ç›´æ¥æ°‘ä¸»å’Œé—´æ¥æ°‘ä¸»çš„ç»Ÿä¸€", "D.äººæ°‘æ°‘ä¸»å’Œå›½å®¶æ„å¿—çš„ç»Ÿä¸€"], ans: ["A", "B", "C", "D"] },
    { id: 23, q: "è¦æ‰“èµ¢å…³é”®æ ¸å¿ƒæŠ€æœ¯æ”»åšæˆ˜ï¼Œè¿™æ˜¯å› ä¸º", options: ["A.å…³é”®æ ¸å¿ƒæŠ€æœ¯æ˜¯è¦ä¸æ¥ã€ä¹°ä¸æ¥ã€è®¨ä¸æ¥çš„", "B.å…³é”®æ ¸å¿ƒæŠ€æœ¯æ˜¯å›½ä¹‹é‡å™¨", "C.å…³é”®æ ¸å¿ƒæŠ€æœ¯å¿…é¡»æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­", "D.ä»æ ¹æœ¬ä¸Šä¿éšœå›½å®¶ç»æµå®‰å…¨ã€å›½é˜²å®‰å…¨å’Œå…¶ä»–å®‰å…¨"], ans: ["A", "B", "C", "D"] },
    { id: 24, q: "å…¨é¢ä»ä¸¥æ²»å…š", options: ["A.æ ¸å¿ƒæ˜¯åŠ å¼ºå…šçš„é¢†å¯¼", "B.åŸºç¡€åœ¨å…¨é¢", "C.å…³é”®åœ¨ä¸¥", "D.è¦å®³åœ¨æ²»"], ans: ["A", "B", "C", "D"] },
    { id: 25, q: "åŠ å¼ºå’Œè§„èŒƒå…šå†…æ”¿æ²»ç”Ÿæ´»çš„æ–°è¦æ±‚ï¼Œå…¶ä¸»è¦å†…å®¹æ˜¯", options: ["A.ç€åŠ›æé«˜å…šçš„é¢†å¯¼æ°´å¹³å’Œæ‰§æ”¿æ°´å¹³", "B.ç€åŠ›å¢å¼ºæ”¿æ²»ç”Ÿæ´»çš„æ”¿æ²»æ€§ã€æ—¶ä»£æ€§ã€åŸåˆ™æ€§ã€æˆ˜æ–—æ€§", "C.ç€åŠ›å¢å¼ºå…šè‡ªæˆ‘å‡€åŒ–ã€è‡ªæˆ‘å®Œå–„ã€è‡ªæˆ‘é©æ–°ã€è‡ªæˆ‘æé«˜èƒ½åŠ›", "D.ç€åŠ›ç»´æŠ¤å…šä¸­å¤®æƒå¨ã€ä¿è¯å…šçš„å›¢ç»“ç»Ÿä¸€"], ans: ["A", "B", "C", "D"] }
];

// ================= JS æ ¸å¿ƒé€»è¾‘ =================

// åˆ›å»ºé¢˜ç›®å¡ç‰‡çš„é€šç”¨å‡½æ•°
function createCard(item, type, prefix, globalIndex) {
    const card = document.createElement('div');
    card.className = 'question-card';
    card.id = `q_${prefix}${item.id}`;
    card.dataset.qIndex = globalIndex;
    
    const tagLabel = type === 'radio' ? 'å•é€‰' : 'å¤šé€‰';
    
    // é€‰é¡¹ç”Ÿæˆ
    let optionsHtml = '<div class="options-group">';
    item.options.forEach(opt => {
        const optKey = opt.charAt(0);
        optionsHtml += `
            <label class="option-label">
                <input type="${type}" name="${prefix}${item.id}" value="${optKey}" data-qindex="${globalIndex}">
                <span class="checkmark"></span>
                <span class="option-text">${opt}</span>
            </label>
        `;
    });
    optionsHtml += '</div>';

    card.innerHTML = `
        <div class="question-text">
            <span class="q-tag">${tagLabel}</span>${globalIndex}. ${item.q}
        </div>
        ${optionsHtml}
        <div class="result-box" id="f_${prefix}${item.id}"></div>
    `;
    return card;
}

// åˆ›å»ºç­”é¢˜å¡å¯¼èˆªæŒ‰é’®
function createNavButton(index, targetId, type) {
    const button = document.createElement('a');
    button.href = `#${targetId}`;
    button.className = 'q-nav-button ' + (type === 'single' ? 'nav-single' : 'nav-multi');
    button.id = `nav_q_${index}`;
    button.innerText = index;
    button.onclick = (e) => {
        e.preventDefault();
        const el = document.getElementById(targetId);
        if (!el) return;
        // å¦‚æœæ˜¯å°å±å¹•ï¼Œå…ˆå…³é—­ç§»åŠ¨ç«¯ä¾§æ ä»¥æ¢å¤é¡µé¢æ»šåŠ¨ï¼Œç„¶åå†æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½®
        if (typeof isSmallScreen === 'function' && isSmallScreen()) {
            try { closeMobileSidebar(); } catch (err) { /* ignore */ }
            setTimeout(() => {
                el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 320);
        } else {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    };
    return button;
}

// æ¸²æŸ“æ‰€æœ‰ç»„ä»¶
function renderQuiz() {
    const sContainer = document.getElementById('single-choice-container');
    const mContainer = document.getElementById('multi-choice-container');
    const navContainerSingle = document.getElementById('question-navigator-single');
    const navContainerMulti = document.getElementById('question-navigator-multi');
    
    let globalIndex = 1;

    // æ¸²æŸ“å•é€‰
    singleChoiceData.forEach(item => {
        const card = createCard(item, 'radio', 's_', globalIndex);
        sContainer.appendChild(card);
        navContainerSingle.appendChild(createNavButton(globalIndex, card.id, 'single'));
        globalIndex++;
    });

    // æ¸²æŸ“å¤šé€‰
    multiChoiceData.forEach(item => {
        const card = createCard(item, 'checkbox', 'm_', globalIndex);
        mContainer.appendChild(card);
        navContainerMulti.appendChild(createNavButton(globalIndex, card.id, 'multi'));
        globalIndex++;
    });
    
    // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
    initListeners();
    // åˆå§‹è¿›åº¦
    updateProgressText();
}

// å®æ—¶æ›´æ–°ç­”é¢˜çŠ¶æ€å’Œè¿›åº¦
function updateQuestionStatus(qIndex, name) {
    const navButton = document.getElementById(`nav_q_${qIndex}`);
    const formInputs = document.querySelectorAll(`input[name="${name}"]`);
    let isAnswered = false;
    
    // æ£€æŸ¥è¯¥é¢˜æ˜¯å¦æœ‰ä»»ä½•é€‰é¡¹è¢«é€‰ä¸­
    for (const input of formInputs) {
        if (input.checked) {
            isAnswered = true;
            break;
        }
    }

    if (isAnswered) {
        navButton.classList.add('answered');
    } else {
        navButton.classList.remove('answered');
    }
    
    updateProgressText();
}

// æ›´æ–°è¿›åº¦æ–‡æœ¬
function updateProgressText() {
     const answeredCount = document.querySelectorAll('.q-nav-button.answered').length;
     document.getElementById('progress-text').innerText = `${answeredCount} / 75 é¢˜å·²ä½œç­”`;
}


function initListeners() {
    const quizForm = document.getElementById('quizForm');
    // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œç›‘å¬è¡¨å•å†…æ‰€æœ‰ input çš„å˜åŒ–
    quizForm.addEventListener('change', (event) => {
        const inputName = event.target.name;
        const qIndex = event.target.dataset.qindex;
        if (inputName && qIndex) {
            updateQuestionStatus(qIndex, inputName);
        }
    });
}

// æäº¤è¯„åˆ†é€»è¾‘ (å…¨å±€å‡½æ•°ï¼Œä¾› HTML ä¸­çš„ onclick è°ƒç”¨)
function submitQuiz() {
    let score = 0;
    let totalCorrect = 0;
    
    // æ•´åˆæ‰€æœ‰é¢˜ç›®æ•°æ®ï¼Œæ–¹ä¾¿ç»Ÿä¸€å¤„ç†
    const allQuestions = [
        ...singleChoiceData.map(q => ({...q, prefix: 's_', isMulti: false, index: singleChoiceData.indexOf(q) + 1})), 
        ...multiChoiceData.map(q => ({...q, prefix: 'm_', isMulti: true, index: singleChoiceData.length + multiChoiceData.indexOf(q) + 1}))
    ];
    
    const rootStyle = getComputedStyle(document.documentElement);
    const successColor = rootStyle.getPropertyValue('--success').trim();
    const errorColor = rootStyle.getPropertyValue('--error').trim();
    
    // ç”¨äºä¿å­˜æœ¬æ¬¡ç­”é¢˜è®°å½•çš„æ•°ç»„
    const answerRecord = [];
    
    allQuestions.forEach(item => {
        const cardId = `q_${item.prefix}${item.id}`;
        const card = document.getElementById(cardId);
        const feedback = document.getElementById(`f_${item.prefix}${item.id}`);
        const navButton = document.getElementById(`nav_q_${item.index}`);
        
        // æ¸…é™¤æ—§çŠ¶æ€
        card.classList.remove('correct', 'incorrect');
        navButton.classList.remove('answered', 'correct', 'incorrect');
        feedback.style.display = 'block';

        let isCorrect = false;
        let userAnswer = null;

        if (!item.isMulti) {
            // å•é€‰é€»è¾‘
            const selected = document.querySelector(`input[name="${item.prefix}${item.id}"]:checked`);
            userAnswer = selected ? selected.value : null;

            if (userAnswer === item.ans) {
                score += 1;
                isCorrect = true;
            } 
            feedback.innerHTML = `<strong>${isCorrect ? 'âœ” å›ç­”æ­£ç¡®' : 'âœ˜ å›ç­”é”™è¯¯'}</strong><br>æ­£ç¡®ç­”æ¡ˆ: <b>${item.ans}</b>`;
            
            // è®°å½•å•é€‰ç­”æ¡ˆ
            answerRecord.push({
                questionIndex: item.index,
                questionId: item.id,
                type: 'single',
                correctAnswer: item.ans,
                userAnswer: userAnswer,
                isCorrect: isCorrect,
                options: item.options
            });

        } else {
            // å¤šé€‰é€»è¾‘
            const checkboxes = document.querySelectorAll(`input[name="${item.prefix}${item.id}"]:checked`);
            // è·å–ç”¨æˆ·é€‰ä¸­é€‰é¡¹å¹¶æ’åºåæ‹¼æ¥
            const userVals = Array.from(checkboxes).map(cb => cb.value).sort().join('');
            // è·å–æ­£ç¡®ç­”æ¡ˆå¹¶æ’åºåæ‹¼æ¥
            const correctVals = Array.isArray(item.ans) ? item.ans.sort().join('') : item.ans;
            userAnswer = Array.from(checkboxes).map(cb => cb.value).sort();

            if (userVals === correctVals) {
                score += 2;
                isCorrect = true;
            }
            feedback.innerHTML = `<strong>${isCorrect ? 'âœ” å›ç­”æ­£ç¡®' : 'âœ˜ å›ç­”é”™è¯¯'}</strong><br>æ­£ç¡®ç­”æ¡ˆ: <b>${Array.isArray(item.ans) ? item.ans.join('') : item.ans}</b>`;
            
            // è®°å½•å¤šé€‰ç­”æ¡ˆ
            answerRecord.push({
                questionIndex: item.index,
                questionId: item.id,
                type: 'multi',
                correctAnswer: Array.isArray(item.ans) ? item.ans : [item.ans],
                userAnswer: userAnswer,
                isCorrect: isCorrect,
                options: item.options
            });
        }
        
        // æ›´æ–°å¡ç‰‡å’Œå¯¼èˆªæŒ‰é’®çŠ¶æ€
        if (isCorrect) {
            card.classList.add('correct');
            navButton.classList.add('correct');
            totalCorrect++;
        } else {
            card.classList.add('incorrect');
            navButton.classList.add('incorrect');
        }
    });

    // ç¦ç”¨è¾“å…¥ï¼Œé˜²æ­¢é‡å¤æäº¤å’Œä¿®æ”¹
    document.querySelectorAll('#quizForm input').forEach(input => input.disabled = true);

    // æ˜¾ç¤ºæœ€ç»ˆå¾—åˆ†
    const scoreDisplay = document.getElementById('finalScore');
    const progressText = document.getElementById('progress-text');
    
    scoreDisplay.style.display = 'block';
    scoreDisplay.innerHTML = `${score} <span style="font-size:0.5em;color:#666">/ 100</span>`;
    
    progressText.innerText = `æœ€ç»ˆå¾—åˆ†ï¼š${score} åˆ†`;
    progressText.style.color = score >= 60 ? successColor : errorColor;

    // ä¿å­˜æœ¬æ¬¡ç­”é¢˜è®°å½•
    saveQuizResult(score, answerRecord);

    // æ»šåŠ¨åˆ°é¡¶éƒ¨
    window.scrollTo({ top: 0, behavior: 'smooth' });
    alert(`äº¤å·æˆåŠŸï¼æ‚¨çš„æœ€ç»ˆå¾—åˆ†æ˜¯ï¼š${score}åˆ†`);
}

// é‡ç½®é¡µé¢ (å…¨å±€å‡½æ•°ï¼Œä¾› HTML ä¸­çš„ onclick è°ƒç”¨)
function resetQuiz() {
    if(confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç­”æ¡ˆé‡ç½®è¯•å·å—ï¼Ÿ")) {
        location.reload();
    }
}

// åˆå§‹åŒ–ä¾§æ æŠ˜å /å±•å¼€åŠŸèƒ½
function initSidebar() {
    const sidebar = document.getElementById('sidebar');
    const toggle = document.getElementById('sidebar-toggle');
    if (!sidebar || !toggle) return;

    // æ¢å¤ä¸Šæ¬¡çŠ¶æ€
    const collapsed = localStorage.getItem('sidebarCollapsed') === 'true';
    if (collapsed) {
        sidebar.classList.add('collapsed');
        document.body.classList.add('sidebar-collapsed');
        toggle.setAttribute('aria-expanded', 'false');
    } else {
        sidebar.classList.remove('collapsed');
        document.body.classList.remove('sidebar-collapsed');
        toggle.setAttribute('aria-expanded', 'true');
    }

    // åœ¨ç§»åŠ¨ç«¯ç‚¹å‡»ä½¿ç”¨æŠ½å±‰é€»è¾‘ï¼Œåœ¨å¤§å±ä¿ç•™æŠ˜å é€»è¾‘
    toggle.addEventListener('click', (e) => {
        if (window.innerWidth <= 1000) {
            // ç§»åŠ¨ç«¯ï¼šåˆ‡æ¢æŠ½å±‰
            e.stopPropagation();
            toggleMobileSidebar();
            return;
        }

        // æ¡Œé¢ç«¯ï¼šæŠ˜å /å±•å¼€
        const isCollapsed = sidebar.classList.toggle('collapsed');
        document.body.classList.toggle('sidebar-collapsed', isCollapsed);
        toggle.setAttribute('aria-expanded', String(!isCollapsed));
        localStorage.setItem('sidebarCollapsed', String(isCollapsed));
    });
}

// ================= å†å²è®°å½•ç›¸å…³å‡½æ•° =================

// ä¿å­˜ç­”é¢˜ç»“æœåˆ°localStorageï¼ˆæœ€å¤šä¿å­˜10æ¡ï¼‰
function saveQuizResult(score, answerRecord) {
    const history = getQuizHistory();
    
    // åˆ›å»ºæ–°è®°å½•
    const newRecord = {
        id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
        score: score,
        date: new Date().toLocaleString('zh-CN'),
        answers: answerRecord
    };
    
    // å°†æ–°è®°å½•æ·»åŠ åˆ°æœ€å‰é¢
    history.unshift(newRecord);
    
    // åªä¿ç•™æœ€è¿‘10æ¡è®°å½•
    if (history.length > 10) {
        history.splice(10);
    }
    
    // ä¿å­˜åˆ°localStorage
    localStorage.setItem('quizHistory', JSON.stringify(history));
}

// è·å–ç­”é¢˜å†å²è®°å½•ï¼ˆå®¹é”™ï¼šè§£æå¤±è´¥ä¼šè‡ªåŠ¨æ¸…ç©ºå†å²ï¼‰
function getQuizHistory() {
    const key = 'quizHistory';
    const historyJson = localStorage.getItem(key);
    if (!historyJson) return [];
    try {
        const parsed = JSON.parse(historyJson);
        // éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼šæ¯æ¡è®°å½•éƒ½å¿…é¡»æœ‰ answers æ•°ç»„å’Œæ¯ä¸ª answer éƒ½æœ‰ options
        if (!Array.isArray(parsed)) return [];
        
        const validHistory = parsed.filter(record => {
            if (!record || typeof record !== 'object') return false;
            if (!Array.isArray(record.answers)) return false;
            // æ£€æŸ¥æ¯ä¸ª answer éƒ½æœ‰å¿…è¦å­—æ®µ
            return record.answers.every(answer => 
                answer && typeof answer === 'object' && Array.isArray(answer.options)
            );
        });
        
        // å¦‚æœæ•°æ®è¢«è¿‡æ»¤ï¼ˆåˆ é™¤äº†æ— æ•ˆè®°å½•ï¼‰ï¼Œæ›´æ–°å­˜å‚¨
        if (validHistory.length !== parsed.length) {
            console.warn(`å‘ç° ${parsed.length - validHistory.length} æ¡æ— æ•ˆè®°å½•ï¼Œå·²æ¸…é™¤`);
            localStorage.setItem(key, JSON.stringify(validHistory));
        }
        
        return validHistory;
    } catch (err) {
        console.warn('quizHistory è§£æå¤±è´¥ï¼Œå·²æ¸…ç©ºå†å²è®°å½•', err);
        localStorage.removeItem(key);
        return [];
    }
}

// æ˜¾ç¤ºå†å²è®°å½•æ¨¡æ€æ¡†
function showHistory() {
    console.log('showHistory å‡½æ•°è¢«è°ƒç”¨');
    try {
        const modal = document.getElementById('historyModal');
        const historyList = document.getElementById('historyList');
        
        if (!modal) {
            console.error('æ‰¾ä¸åˆ° historyModal å…ƒç´ ');
            alert('æ— æ³•æ‰“å¼€å†å²è®°å½•ï¼šæ‰¾ä¸åˆ°æ¨¡æ€æ¡†å…ƒç´ ');
            return;
        }
        
        if (!historyList) {
            console.error('æ‰¾ä¸åˆ° historyList å…ƒç´ ');
            alert('æ— æ³•æ‰“å¼€å†å²è®°å½•ï¼šæ‰¾ä¸åˆ°åˆ—è¡¨å…ƒç´ ');
            return;
        }
        
        const history = getQuizHistory();
        
        // æ¸²æŸ“å†å²è®°å½•åˆ—è¡¨
        if (history.length === 0) {
            historyList.innerHTML = '<div style="text-align: center; color: var(--text-sub); padding: 40px;">æš‚æ— ç­”é¢˜è®°å½•</div>';
        } else {
            historyList.innerHTML = history.map((record, index) => {
                // ç»Ÿè®¡è¿™æ¬¡ç­”é¢˜çš„æ­£ç¡®é¢˜æ•°
                const correctCount = record.answers ? record.answers.filter(a => a.isCorrect).length : 0;
                const totalCount = record.answers ? record.answers.length : 0;
                
                // ç”Ÿæˆè¯¦ç»†ç­”æ¡ˆåˆ—è¡¨
                let answersHtml = '';
                if (Array.isArray(record.answers)) {
                    answersHtml = record.answers.map(answer => {
                        // æ ¼å¼åŒ–ç”¨æˆ·ç­”æ¡ˆ
                        let userAnswerDisplay = 'æœªä½œç­”';
                        if (answer.userAnswer) {
                            if (Array.isArray(answer.userAnswer)) {
                                userAnswerDisplay = answer.userAnswer.join('');
                            } else {
                                userAnswerDisplay = answer.userAnswer;
                            }
                        }
                        
                        // æ ¼å¼åŒ–æ­£ç¡®ç­”æ¡ˆ
                        let correctAnswerDisplay = '';
                        if (Array.isArray(answer.correctAnswer)) {
                            correctAnswerDisplay = answer.correctAnswer.join('');
                        } else {
                            correctAnswerDisplay = answer.correctAnswer;
                        }
                        
                        const resultColor = answer.isCorrect ? 'var(--success)' : 'var(--error)';
                        const resultText = answer.isCorrect ? 'âœ“ æ­£ç¡®' : 'âœ— é”™è¯¯';
                        
                        return `
                            <div style="background: var(--bg-body); padding: 12px; border-radius: 8px; margin-bottom: 8px; border-left: 4px solid ${resultColor};">
                                <div style="font-weight: 600; margin-bottom: 6px; color: var(--text-main);">ç¬¬ ${answer.questionIndex} é¢˜</div>
                                <div style="font-size: 0.9rem; color: var(--text-sub); margin-bottom: 4px;">
                                    <span style="display: inline-block; padding: 2px 8px; background: var(--primary-light); border-radius: 4px; margin-right: 8px;">
                                        ä½ çš„ç­”æ¡ˆ: <strong>${userAnswerDisplay}</strong>
                                    </span>
                                </div>
                                <div style="font-size: 0.9rem; color: var(--text-sub); margin-bottom: 4px;">
                                    <span style="display: inline-block; padding: 2px 8px; background: #f0f0f0; border-radius: 4px; margin-right: 8px;">
                                        æ­£ç¡®ç­”æ¡ˆ: <strong>${correctAnswerDisplay}</strong>
                                    </span>
                                </div>
                                <div style="font-size: 0.9rem; color: ${resultColor}; font-weight: 600;">
                                    ${resultText}
                                </div>
                            </div>
                        `;
                    }).join('');
                }
                
                return `
                    <div class="history-item">
                        <div class="history-item-header">
                            <div>
                                <div class="history-item-title">ç¬¬ ${index + 1} æ¬¡ç­”é¢˜</div>
                                <div class="history-item-date">${record.date}</div>
                                <div style="font-size: 0.85rem; color: var(--text-sub); margin-top: 4px;">
                                    ç­”å¯¹ ${correctCount}/${totalCount} é¢˜
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px;">
                                <div class="history-item-score">${record.score} åˆ†</div>
                                <button class="history-item-delete" onclick="deleteHistoryItem(${record.id})">åˆ é™¤</button>
                            </div>
                        </div>
                        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border);">
                            <details style="cursor: pointer;">
                                <summary style="color: var(--primary); font-weight: 600; margin-bottom: 8px;">
                                    å±•å¼€æŸ¥çœ‹è¯¦ç»†ç­”é¢˜æƒ…å†µ
                                </summary>
                                <div style="margin-top: 12px;">
                                    ${answersHtml}
                                </div>
                            </details>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // æ˜¾ç¤ºé€‰é¡¹ç»Ÿè®¡ï¼ˆä½¿ç”¨try-catchç¡®ä¿å³ä½¿å‡ºé”™ä¹Ÿèƒ½æ˜¾ç¤ºæ¨¡æ€æ¡†ï¼‰
        try {
            updateOptionStats(history);
        } catch (err) {
            console.error('æ›´æ–°é€‰é¡¹ç»Ÿè®¡æ—¶å‡ºé”™:', err);
            const optionStatsEl = document.getElementById('optionStats');
            if (optionStatsEl) {
                optionStatsEl.innerHTML = '<div style="color: var(--error); padding: 10px;">ç»Ÿè®¡åŠŸèƒ½æš‚æ—¶æ— æ³•ä½¿ç”¨</div>';
            }
        }
        
        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        modal.style.display = 'block';
    } catch (err) {
        console.error('showHistory å‡½æ•°æ‰§è¡Œå‡ºé”™:', err);
        alert('æ‰“å¼€å†å²è®°å½•æ—¶å‡ºé”™: ' + err.message);
    }
}

// å…³é—­å†å²è®°å½•æ¨¡æ€æ¡†
function closeHistory() {
    const modal = document.getElementById('historyModal');
    if (modal) modal.style.display = 'none';
}

// åˆ é™¤å•æ¡å†å²è®°å½•
function deleteHistoryItem(id) {
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
        const history = getQuizHistory();
        const filteredHistory = history.filter(record => record.id !== id);
        localStorage.setItem('quizHistory', JSON.stringify(filteredHistory));
        showHistory(); // åˆ·æ–°æ˜¾ç¤º
    }
}

// æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•
function clearAllHistory() {
    if (confirm('ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ç­”é¢˜è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
        localStorage.removeItem('quizHistory');
        showHistory(); // åˆ·æ–°æ˜¾ç¤º
    }
}

// æ›´æ–°é€‰é¡¹æ­£ç¡®ç‡ç»Ÿè®¡
function updateOptionStats(history) {
    const optionStatsEl = document.getElementById('optionStats');
    if (!optionStatsEl) {
        console.warn('æ‰¾ä¸åˆ° optionStats å…ƒç´ ');
        return;
    }
    
    if (history.length === 0) {
        optionStatsEl.innerHTML = '';
        return;
    }
    
    // ç»Ÿè®¡æ¯ä¸ªé€‰é¡¹çš„é€‰æ‹©æ¬¡æ•°å’Œæ­£ç¡®æ¬¡æ•°
    // æ ¼å¼ï¼š{ "questionIndex_optionKey": { questionIndex, option, selectedCount, correctCount } }
    const optionStats = {};
    
    // éå†æ‰€æœ‰å†å²è®°å½•
    history.forEach(record => {
        // æ£€æŸ¥ answers å­—æ®µæ˜¯å¦å­˜åœ¨ä¸”æ˜¯æ•°ç»„
        if (!Array.isArray(record.answers)) {
            console.warn('è®°å½•ä¸­ç¼ºå°‘ answers å­—æ®µæˆ–ä¸æ˜¯æ•°ç»„:', record);
            return;
        }
        
        record.answers.forEach(answer => {
            // æ£€æŸ¥ options å­—æ®µæ˜¯å¦å­˜åœ¨ä¸”æ˜¯æ•°ç»„ï¼ˆé˜²æ­¢æ—§è®°å½•æ²¡æœ‰æ­¤å­—æ®µï¼‰
            if (!Array.isArray(answer.options)) {
                console.warn('ç­”æ¡ˆè®°å½•ä¸­ç¼ºå°‘ options å­—æ®µ:', answer);
                return;
            }
            
            // éå†è¯¥é¢˜çš„æ‰€æœ‰é€‰é¡¹
            answer.options.forEach((opt) => {
                const optionKey = opt.charAt(0); // A, B, C, Dç­‰
                const questionKey = `${answer.questionIndex}_${optionKey}`;
                
                // åˆå§‹åŒ–ç»Ÿè®¡å¯¹è±¡
                if (!optionStats[questionKey]) {
                    optionStats[questionKey] = {
                        questionIndex: answer.questionIndex,
                        option: optionKey,
                        selectedCount: 0,
                        correctCount: 0
                    };
                }
                
                // ç»Ÿè®¡é€‰æ‹©æ¬¡æ•°å’Œæ­£ç¡®æ¬¡æ•°
                if (answer.type === 'single') {
                    // å•é€‰é¢˜ï¼šå¦‚æœç”¨æˆ·é€‰æ‹©äº†è¯¥é€‰é¡¹
                    if (answer.userAnswer === optionKey) {
                        optionStats[questionKey].selectedCount++;
                        // å¦‚æœç”¨æˆ·ç­”å¯¹äº†ï¼ˆå³é€‰æ‹©çš„é€‰é¡¹æ˜¯æ­£ç¡®ç­”æ¡ˆï¼‰ï¼Œåˆ™æ­£ç¡®æ¬¡æ•°+1
                        if (answer.isCorrect) {
                            optionStats[questionKey].correctCount++;
                        }
                    }
                } else {
                    // å¤šé€‰é¢˜ï¼šå¦‚æœç”¨æˆ·é€‰æ‹©äº†è¯¥é€‰é¡¹
                    if (answer.userAnswer && Array.isArray(answer.userAnswer) && answer.userAnswer.includes(optionKey)) {
                        optionStats[questionKey].selectedCount++;
                        // å¦‚æœç”¨æˆ·ç­”å¯¹äº†æ•´ä¸ªé¢˜ç›®ï¼Œä¸”è¯¥é€‰é¡¹æ˜¯æ­£ç¡®ç­”æ¡ˆçš„ä¸€éƒ¨åˆ†ï¼Œåˆ™æ­£ç¡®æ¬¡æ•°+1
                        if (answer.isCorrect && Array.isArray(answer.correctAnswer) && answer.correctAnswer.includes(optionKey)) {
                            optionStats[questionKey].correctCount++;
                        }
                    }
                }
            });
        });
    });
    
    // è®¡ç®—æ­£ç¡®ç‡å¹¶ç”Ÿæˆç»Ÿè®¡HTML
    let statsHtml = '<h3>é€‰é¡¹æ­£ç¡®ç‡åˆ†æï¼ˆä»…æ˜¾ç¤ºæœ‰é€‰æ‹©è®°å½•çš„é€‰é¡¹ï¼‰</h3><div class="stats-grid">';
    
    // è¿‡æ»¤å‡ºæœ‰é€‰æ‹©è®°å½•çš„é€‰é¡¹ï¼Œå¹¶æŒ‰é¢˜ç›®å’Œé€‰é¡¹æ’åº
    const statsArray = Object.values(optionStats)
        .filter(stat => stat.selectedCount > 0)
        .sort((a, b) => {
            if (a.questionIndex !== b.questionIndex) {
                return a.questionIndex - b.questionIndex;
            }
            return a.option.localeCompare(b.option);
        });
    
    if (statsArray.length === 0) {
        statsHtml += '<div style="text-align: center; color: var(--text-sub); padding: 20px;">æš‚æ— ç»Ÿè®¡æ•°æ®</div>';
    } else {
        statsArray.forEach(stat => {
            const accuracy = stat.selectedCount > 0 
                ? ((stat.correctCount / stat.selectedCount) * 100).toFixed(1) 
                : 0;
            const accuracyColor = parseFloat(accuracy) >= 50 ? 'var(--success)' : 'var(--error)';
            statsHtml += `
                <div class="stat-item">
                    <div class="stat-item-label">ç¬¬${stat.questionIndex}é¢˜ - é€‰é¡¹${stat.option}</div>
                    <div class="stat-item-value" style="color: ${accuracyColor}">æ­£ç¡®ç‡: ${accuracy}%</div>
                    <div style="font-size: 0.85rem; color: var(--text-sub); margin-top: 4px;">
                        é€‰æ‹©${stat.selectedCount}æ¬¡ï¼Œæ­£ç¡®${stat.correctCount}æ¬¡
                    </div>
                </div>
            `;
        });
    }
    
    statsHtml += '</div>';
    if (optionStatsEl) {
        optionStatsEl.innerHTML = statsHtml;
    }
}

// ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
document.addEventListener('click', function(event) {
    const modal = document.getElementById('historyModal');
    if (modal && event.target === modal) {
        closeHistory();
    }
});

// ç¡®ä¿å‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸå¯ç”¨
window.showHistory = showHistory;
window.closeHistory = closeHistory;
window.deleteHistoryItem = deleteHistoryItem;
window.clearAllHistory = clearAllHistory;

// ================= æ‰‹æœºç«¯ç­”é¢˜å¡æ§åˆ¶ =================

// æ£€æŸ¥æ˜¯å¦ä¸ºå°å±å¹•
function isSmallScreen() {
    return window.innerWidth <= 1000;
}

// åˆ‡æ¢æ‰‹æœºç«¯ç­”é¢˜å¡æ˜¾ç¤º
function toggleMobileSidebar() {
    const sidebar = document.getElementById('sidebar');
    const mobileBtn = document.getElementById('mobileAnswerCardBtn');
    
    if (!sidebar) return;
    
    const isOpen = sidebar.classList.contains('mobile-open');
    
    if (isOpen) {
        closeMobileSidebar();
    } else {
        openMobileSidebar();
    }
}

// æ‰“å¼€æ‰‹æœºç«¯ç­”é¢˜å¡
function openMobileSidebar() {
    const sidebar = document.getElementById('sidebar');
    const body = document.body;
    
    if (!sidebar) return;
    
    sidebar.classList.add('mobile-open');
    body.classList.add('sidebar-open');

    // ä¿å­˜æ»šåŠ¨ä½ç½®å¹¶ç¦æ­¢é¡µé¢æ»šåŠ¨ï¼ˆä»¥é¿å…é¡µé¢è¢«æŒ¤åŠ¨ï¼‰
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop || 0;
    body.dataset.scrollTop = scrollTop;
    body.style.position = 'fixed';
    body.style.top = `-${scrollTop}px`;
    body.style.left = '0';
    body.style.right = '0';
    body.style.width = '100%';

    // æ·»åŠ å…¨å±€å…³é—­äº‹ä»¶ï¼ˆç‚¹å‡»ä¾§æ å¤–æˆ–æŒ‰ ESC å…³é—­ï¼‰
    setTimeout(() => {
        document.addEventListener('click', handleMobileSidebarClose);
        document.addEventListener('keydown', handleMobileSidebarKeydown);
    }, 50);
}

// å…³é—­æ‰‹æœºç«¯ç­”é¢˜å¡
function closeMobileSidebar() {
    const sidebar = document.getElementById('sidebar');
    const body = document.body;
    
    if (!sidebar) return;
    
    sidebar.classList.remove('mobile-open');
    body.classList.remove('sidebar-open');

    // ç§»é™¤å…¨å±€äº‹ä»¶ç›‘å¬
    document.removeEventListener('click', handleMobileSidebarClose);
    document.removeEventListener('keydown', handleMobileSidebarKeydown);

    // æ¢å¤é¡µé¢æ»šåŠ¨å’Œæ»šåŠ¨ä½ç½®
    const prevScroll = parseInt(body.dataset.scrollTop || 0);
    body.style.position = '';
    body.style.top = '';
    body.style.left = '';
    body.style.right = '';
    body.style.width = '';
    if (!Number.isNaN(prevScroll) && prevScroll > 0) {
        window.scrollTo(0, prevScroll);
    }
}

// å¤„ç†è’™å±‚ç‚¹å‡»å…³é—­
function handleMobileSidebarClose(event) {
    const sidebar = document.getElementById('sidebar');
    const mobileBtn = document.getElementById('mobileAnswerCardBtn');
    const mobileClose = document.getElementById('mobileCloseBtn');

    // å¦‚æœç‚¹å‡»åœ¨sidebaræˆ–mobileBtnä¸Šï¼Œä¸å…³é—­
    if (sidebar && sidebar.contains(event.target)) return;
    if (mobileBtn && mobileBtn.contains(event.target)) return;
    if (mobileClose && mobileClose.contains(event.target)) return;

    // æ£€æŸ¥ç‚¹å‡»æ˜¯å¦åœ¨è’™å±‚ä¸Š
    const body = document.body;
    if (body.classList.contains('sidebar-open')) {
        closeMobileSidebar();
    }
}

function handleMobileSidebarKeydown(event) {
    if (event.key === 'Escape' || event.key === 'Esc') {
        closeMobileSidebar();
    }
}

// ç­”é¢˜å¡å¯¼èˆªæŒ‰é’®ç‚¹å‡»æ—¶è‡ªåŠ¨å…³é—­æ‰‹æœºç‰ˆç­”é¢˜å¡
function setupMobileNavigation() {
    // å§‹ç»ˆç»‘å®šï¼Œç‚¹å‡»å¯¼èˆªåè‹¥ä¸ºç§»åŠ¨ç«¯åˆ™å»¶è¿Ÿå…³é—­æŠ½å±‰ä»¥å…è®¸æ»šåŠ¨åŠ¨ç”»å®Œæˆ
    const navButtons = document.querySelectorAll('.q-nav-button');
    function mobileNavHandler() {
        if (isSmallScreen()) {
            setTimeout(() => closeMobileSidebar(), 300);
        }
    }
    navButtons.forEach(btn => {
        btn.removeEventListener('click', mobileNavHandler);
        btn.addEventListener('click', mobileNavHandler);
    });
}

// åˆå§‹åŒ–æ‰‹æœºç«¯ç­”é¢˜å¡æ˜¾ç¤º/éšè—æŒ‰é’®
function initMobileAnswerCardBtn() {
    const mobileBtn = document.getElementById('mobileAnswerCardBtn');
    if (!mobileBtn) return;
    
    // æ£€æŸ¥å±å¹•å¤§å°ï¼Œå†³å®šæ˜¯å¦æ˜¾ç¤ºæŒ‰é’®
    function updateBtnVisibility() {
        const mobileClose = document.getElementById('mobileCloseBtn');
        if (isSmallScreen()) {
            mobileBtn.style.display = 'flex';
            if (mobileClose) mobileClose.style.display = 'flex';
        } else {
            mobileBtn.style.display = 'none';
            if (mobileClose) mobileClose.style.display = 'none';
            closeMobileSidebar(); // å¤§å±å¹•æ—¶å…³é—­mobileä¾§æ 
        }
    }
    
    // åˆå§‹æ£€æŸ¥
    updateBtnVisibility();
    
    // ç›‘å¬çª—å£resize
    window.addEventListener('resize', updateBtnVisibility);
}

// æ¸…ç†æŸåçš„å†å²æ•°æ®ï¼ˆå¯åœ¨æ§åˆ¶å°è°ƒç”¨ï¼‰
window.cleanCorruptedHistory = function() {
    const key = 'quizHistory';
    localStorage.removeItem(key);
    console.log('å·²æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•');
    alert('å·²æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•ï¼Œè¯·é‡æ–°åŠ è½½é¡µé¢ã€‚');
    location.reload();
};

// å¯¼å‡ºæ‰‹æœºç­”é¢˜å¡å‡½æ•°åˆ°å…¨å±€
window.toggleMobileSidebar = toggleMobileSidebar;
window.closeMobileSidebar = closeMobileSidebar;
window.openMobileSidebar = openMobileSidebar;

// åˆå§‹åŒ–
window.onload = function() { 
    renderQuiz(); 
    initSidebar(); 
    initMobileAnswerCardBtn();
    setupMobileNavigation();
};
    </script> 
</body>

</html>
